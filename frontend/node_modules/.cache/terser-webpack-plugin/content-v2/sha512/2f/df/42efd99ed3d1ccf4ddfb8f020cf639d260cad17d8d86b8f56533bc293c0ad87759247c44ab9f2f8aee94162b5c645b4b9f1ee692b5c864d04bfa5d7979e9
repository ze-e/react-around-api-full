{"code":"(this[\"webpackJsonpreact-around-auth\"]=this[\"webpackJsonpreact-around-auth\"]||[]).push([[0],{29:function(e,t,a){},38:function(e,t,a){\"use strict\";a.r(t);var n=a(0),o=a(1),c=a.n(o),i=a(19),s=a.n(i),r=a(8),u=(a(29),a(21)),l=a(2),p=a(3),d=a.p+\"static/media/logo.6c4fd428.svg\",_=c.a.createContext();var j=Object(p.i)((function(e){var t=c.a.useContext(_),a=Object(p.h)(),o=c.a.useState(\"login\"),i=Object(l.a)(o,2),s=i[0],u=i[1],j=c.a.useState(!1),m=Object(l.a)(j,2),b=m[0],f=m[1];return c.a.useEffect((function(){\"/signup\"===a.pathname?u(\"signup\"):\"/login\"===a.pathname&&u(\"login\")}),[a]),Object(n.jsxs)(\"header\",{className:\"header \".concat(!e.loggedIn&&\"header_state_loggedOut\"),children:[Object(n.jsxs)(\"div\",{className:\"header__logo-menu\",children:[Object(n.jsx)(\"img\",{className:\"header__logo\",src:d,alt:\"logo\"}),e.loggedIn&&Object(n.jsx)(\"button\",{className:\"header__menu-icon \".concat(b&&\"header__menu-icon_state_closed\"),type:\"button\",onClick:function(){f(!b)}})]}),Object(n.jsx)(\"nav\",{className:\"header__nav \".concat(!b&&e.loggedIn&&\"header__nav_state_closed\"),children:e.loggedIn?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(\"p\",{className:\"header__email\",children:t.email}),Object(n.jsx)(\"button\",{className:\"header__link_type_logout\",type:\"button\",onClick:function(){e.login(!1),f(!1)},children:\"Log out\"})]}):\"login\"===s?Object(n.jsx)(r.b,{to:\"./signup\",className:\"header__link\",children:\"Sign up\"}):Object(n.jsx)(r.b,{to:\"./login\",className:\"header__link\",children:\"Log in\"})})]})}));var m=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState(!1),r=Object(l.a)(s,2),u=r[0],p=r[1],d=c.a.useState(0),j=Object(l.a)(d,2),m=j[0],b=j[1],f=c.a.useContext(_);c.a.useEffect((function(){e.card.owner&&(e.card.owner===f._id?p(!0):p(!1))}),[e.card]);var h=\"element__delete-button \".concat(u&&\"element__delete-button_visibility_visible\");c.a.useEffect((function(){e.card.likes&&(e.card.likes.some((function(e){return e===f._id}))?i(!0):i(!1))}),[e.card]);var O=\"element__like-button \".concat(o&&\"element__like-button_stateliked\");return c.a.useEffect((function(){e.card.likes&&b(e.card.likes.length)}),[e.card]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(\"div\",{className:h,onClick:function(){e.onCardDelete(e.card)}}),Object(n.jsx)(\"img\",{className:\"element__image\",src:e.card.link,onClick:function(){e.onCardClick(e.card)},alt:\"place\"}),Object(n.jsxs)(\"div\",{className:\"element__text\",children:[Object(n.jsx)(\"h2\",{className:\"element__title\",children:e.card.name}),Object(n.jsxs)(\"div\",{className:\"element__likes-container\",children:[Object(n.jsx)(\"button\",{className:O,onClick:function(){e.onCardLike(e.card)}}),Object(n.jsx)(\"p\",{className:\"element__likes-display\",children:m})]})]})]})},b=a.p+\"static/media/profile-img.074e6423.png\";var f=function(e){var t=c.a.useContext(_);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(\"section\",{className:\"profile\",children:[Object(n.jsxs)(\"div\",{className:\"profile__image-container\",children:[Object(n.jsx)(\"div\",{className:\"profile__image-overlay\",onClick:e.onEditAvatar}),Object(n.jsx)(\"img\",{className:\"profile__image\",src:t.avatar?t.avatar:b,alt:\"profile-img\"})]}),Object(n.jsxs)(\"div\",{className:\"profile__info\",children:[Object(n.jsx)(\"h1\",{className:\"profile__name\",children:t.name?t.name:\"Jacques Cousteau\"}),Object(n.jsx)(\"button\",{className:\"profile__edit-button\",onClick:e.onEditProfile,\"aria-label\":\"edit profile\"}),Object(n.jsx)(\"p\",{className:\"profile__description\",children:t.about?t.about:\"Explorer\"})]}),Object(n.jsx)(\"button\",{className:\"profile__add-button\",onClick:e.onAddPlace})]}),Object(n.jsx)(\"section\",{className:\"elements\",children:e.cards.length>0?e.cards.map((function(t){return Object(n.jsx)(\"div\",{className:\"element\",children:Object(n.jsx)(m,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})},t._id)})):Object(n.jsx)(\"div\",{className:\"loading\",children:\"Add your first place with the + button!\"})})]})};var h=function(){return Object(n.jsx)(\"footer\",{className:\"footer\",children:Object(n.jsx)(\"p\",{className:\"footer__copyright\",children:\"\\xa9 2020 Around The U.S.\"})})};var O=function(e){return Object(n.jsx)(\"section\",{className:\"popup popup_type_image \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup popup_type_image\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"div\",{className:\"popup__image-modal\",children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_image\",type:\"button\",onClick:e.onClose}),Object(n.jsxs)(\"figure\",{children:[Object(n.jsx)(\"img\",{className:\"popup__image\",src:e.card&&e.card.link,alt:\"place\"}),Object(n.jsx)(\"figcaption\",{className:\"popup__image-caption\"})]})]})})})};var g=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useContext(_),r=c.a.useState(\"\"),u=Object(l.a)(r,2),p=u[0],d=u[1],j=c.a.useState(\"\"),m=Object(l.a)(j,2),b=m[0],f=m[1];c.a.useEffect((function(){V(!0),i(!1),s.name&&d(s.name),s.about&&f(s.about)}),[e.isOpen]);var h=c.a.useRef(),O=c.a.useState(\"\"),g=Object(l.a)(O,2),x=g[0],v=g[1],k=c.a.useState(\"\"),y=Object(l.a)(k,2),N=y[0],C=y[1],S=c.a.useState(!0),L=Object(l.a)(S,2),E=L[0],V=L[1];return Object(n.jsx)(\"section\",{className:\"popup popup_type_edit-profile \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup_type_edit-profile\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"form\",{className:\"popup__form popup__form_type_edit-profile\",onSubmit:function(t){E||(t.preventDefault(),e.onUpdateUser(p,b),i(!0))},onChange:function(){e.formValidator(h.current,\".popup__input\")?V(!0):V(!1)},ref:h,children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_edit-profile\",type:\"button\",onClick:e.onClose}),Object(n.jsx)(\"h4\",{className:\"popup__title\",children:\"Edit Profile\"}),Object(n.jsx)(\"input\",{className:\"popup__input popup__input-name \".concat(\"\"!==x&&\"popup__input_type_error\"),id:\"name-input\",type:\"text\",name:\"name\",required:!0,minLength:\"2\",maxLength:\"40\",placeholder:s.name,value:p,onChange:function(t){d(t.target.value),e.fieldValidator(t.target,v)}}),Object(n.jsx)(\"span\",{className:'popup__input-error\" id=\"name-input-error '.concat(\"\"!==x&&\"popup__error_visible\"),children:x}),Object(n.jsx)(\"input\",{className:\"popup__input popup__input-description \".concat(\"\"!==N&&\"popup__input_type_error\"),id:\"description-input\",type:\"text\",name:\"description\",required:!0,minLength:\"2\",maxLength:\"200\",placeholder:s.about,value:b,onChange:function(t){f(t.target.value),e.fieldValidator(t.target,C)}}),Object(n.jsx)(\"span\",{className:'popup__input-error\" id=\"description-input-error '.concat(\"\"!==N&&\"popup__error_visible\"),children:N}),Object(n.jsx)(\"button\",{className:\"popup__submit popup__edit-profile-submit \".concat(E&&\"popup__submit_disabled\"),disabled:E,type:\"submit\",children:\"\".concat(o?\"Loading...\":\"Save\")})]})})})};var x=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState(\"\"),r=Object(l.a)(s,2),u=r[0],p=r[1];c.a.useEffect((function(){p(\"\"),g(!0),i(!1)}),[e.isOpen]);var d=c.a.useRef(),_=c.a.useState(\"\"),j=Object(l.a)(_,2),m=j[0],b=j[1],f=c.a.useState(!0),h=Object(l.a)(f,2),O=h[0],g=h[1];return Object(n.jsx)(\"section\",{className:\"popup popup_type_edit-avatar \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup_type_edit-avatar\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"form\",{className:\"popup__form popup__form_type_edit-avatar\",onSubmit:function(t){O||(t.preventDefault(),e.onUpdateAvatar(u),i(!0))},onChange:function(){e.formValidator(d.current,\".popup__input\")?g(!0):g(!1)},ref:d,children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_edit-avatar\",type:\"button\",onClick:e.onClose}),Object(n.jsx)(\"h4\",{className:\"popup__title\",children:\"Change profile picture\"}),Object(n.jsx)(\"input\",{className:\"popup__input popup__input-avatar \".concat(\"\"!==m&&\"popup__input_type_error\"),id:\"avatar-input\",type:\"url\",name:\"avatar\",value:u,placeholder:\"Image URL\",required:!0,onChange:function(t){p(t.target.value),e.fieldValidator(t.target,b)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error \".concat(\"\"!==m&&\"popup__error_visible\"),id:\"avatar-input-error\",children:m}),Object(n.jsx)(\"button\",{className:\"popup__submit popup__edit-avatar-submit \".concat(O&&\"popup__submit_disabled\"),type:\"submit\",disabled:O,children:\"\".concat(o?\"Loading...\":\"Save\")})]})})})};var v=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState(\"\"),r=Object(l.a)(s,2),u=r[0],p=r[1],d=c.a.useState(\"\"),_=Object(l.a)(d,2),j=_[0],m=_[1];c.a.useEffect((function(){p(\"\"),m(\"\"),L(!0),i(!1)}),[e.isOpen]);var b=c.a.useRef(),f=c.a.useState(\"\"),h=Object(l.a)(f,2),O=h[0],g=h[1],x=c.a.useState(\"\"),v=Object(l.a)(x,2),k=v[0],y=v[1],N=c.a.useState(!0),C=Object(l.a)(N,2),S=C[0],L=C[1];return Object(n.jsx)(\"section\",{className:\"popup popup_type_add-card \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup_type_add-card\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"form\",{className:\"popup__form popup__form_type_add-card\",onSubmit:function(t){S||(t.preventDefault(),e.onAddPlace(u,j),i(!0))},onChange:function(){e.formValidator(b.current,\".popup__input\")?L(!0):L(!1)},ref:b,children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_add-card\",type:\"button\",onClick:e.onClose}),Object(n.jsx)(\"h4\",{className:\"popup__title\",children:\"New Place\"}),Object(n.jsx)(\"input\",{className:\"popup__input popup__input-card-name \".concat(\"\"!==O&&\"popup__input_type_error\"),id:\"card-name-input\",type:\"text\",name:\"name\",placeholder:\"Title\",required:!0,minLength:\"1\",maxLength:\"30\",value:u,onChange:function(t){p(t.target.value),e.fieldValidator(t.target,g)}}),Object(n.jsx)(\"span\",{className:'popup__input-error\" id=\"card-name-input-error '.concat(\"\"!==O&&\"popup__error_visible\"),children:O}),Object(n.jsx)(\"input\",{className:\"popup__input popup__input-card-url \".concat(\"\"!==k&&\"popup__input_type_error\"),id:\"url-input\",type:\"url\",name:\"link\",placeholder:\"Image URL\",required:!0,value:j,onChange:function(t){m(t.target.value),e.fieldValidator(t.target,y)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error \".concat(\"\"!==k&&\"popup__error_visible\"),id:\"url-input-error\",children:k}),Object(n.jsx)(\"button\",{className:\"popup__submit popup__add-card-submit \".concat(S&&\"popup__submit_disabled\"),disabled:S,type:\"submit\",children:\"\".concat(o?\"Loading...\":\"Create\")})]})})})};var k=function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1];return c.a.useEffect((function(){i(!1)}),[e.isOpen]),Object(n.jsx)(\"section\",{className:\"popup popup_type_delete \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup_type_delete\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"form\",{className:\"popup__form\",onSubmit:function(t){t.preventDefault(),e.onDelete(e.card._id),i(!0)},children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_add-card\"}),Object(n.jsx)(\"h4\",{className:\"popup__title popup__title_type_no-bottom-margin\",children:\"Are you sure?\"}),Object(n.jsx)(\"button\",{className:\"popup__submit popup__delete-submit\",type:\"submit\",children:\"\".concat(o?\"Loading...\":\"Delete\")})]})})})};var y=Object(p.i)((function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState(\"\"),u=Object(l.a)(s,2),p=u[0],d=u[1],_=c.a.useState(\"\"),j=Object(l.a)(_,2),m=j[0],b=j[1];c.a.useEffect((function(){E(!0),i(!1)}),[]);var f=c.a.useRef(),h=c.a.useState(\"\"),O=Object(l.a)(h,2),g=O[0],x=O[1],v=c.a.useState(\"\"),k=Object(l.a)(v,2),y=k[0],N=k[1],C=c.a.useState(!0),S=Object(l.a)(C,2),L=S[0],E=S[1];return Object(n.jsx)(\"section\",{className:\"login\",children:Object(n.jsxs)(\"div\",{className:\"login__container\",children:[Object(n.jsxs)(\"form\",{className:\"login__form\",onSubmit:function(t){t.preventDefault(),L||(i(!0),e.logInUser(p,m),i(!1))},onChange:function(){e.formValidator(f.current,\".login__input\")?E(!0):E(!1)},ref:f,children:[Object(n.jsx)(\"h1\",{className:\"login__title\",children:\"Log in\"}),Object(n.jsx)(\"input\",{className:\"login__input \".concat(\"\"!==g&&\"popup__input_type_error\"),id:\"email-input\",type:\"email\",name:\"email\",minLength:\"2\",maxLength:\"40\",required:!0,placeholder:\"Email\",value:p,onChange:function(t){d(t.target.value),e.fieldValidator(t.target,x)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error  \".concat(\"\"!==g&&\"popup__error_visible\"),children:g}),Object(n.jsx)(\"input\",{className:\"login__input \".concat(\"\"!==y&&\"popup__input_type_error\"),id:\"password-input\",type:\"password\",name:\"password\",minLength:\"7\",maxLength:\"12\",required:!0,placeholder:\"Password\",value:m,onChange:function(t){b(t.target.value),e.fieldValidator(t.target,N)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error \".concat(\"\"!==y&&\"popup__error_visible\"),children:y}),Object(n.jsxs)(\"button\",{className:\"login__submit \".concat(L&&\"login__submit_disabled\"),disabled:L,type:\"submit\",children:[\"\".concat(o?\"Loading...\":\"Log In\"),\" \"]})]}),Object(n.jsxs)(\"p\",{className:\"login__caption\",children:[\"Not a member yet? Sign up \",Object(n.jsx)(r.b,{to:\"./signup\",className:\"login__link\",children:\"here\"}),\"!\"]})]})})}));var N=Object(p.i)((function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState(\"\"),u=Object(l.a)(s,2),p=u[0],d=u[1],_=c.a.useState(\"\"),j=Object(l.a)(_,2),m=j[0],b=j[1];c.a.useEffect((function(){E(!0),i(!1)}),[]);var f=c.a.useRef(),h=c.a.useState(\"\"),O=Object(l.a)(h,2),g=O[0],x=O[1],v=c.a.useState(\"\"),k=Object(l.a)(v,2),y=k[0],N=k[1],C=c.a.useState(!0),S=Object(l.a)(C,2),L=S[0],E=S[1];return Object(n.jsx)(\"section\",{className:\"login\",children:Object(n.jsxs)(\"div\",{className:\"login__container\",children:[Object(n.jsxs)(\"form\",{className:\"login__form\",onSubmit:function(t){t.preventDefault(),L||(i(!0),e.registerUser(p,m),i(!1))},onChange:function(){e.formValidator(f.current,\".login__input\")?E(!0):E(!1)},ref:f,children:[Object(n.jsx)(\"h1\",{className:\"login__title\",children:\"Sign up\"}),Object(n.jsx)(\"input\",{className:\"login__input \".concat(\"\"!==g&&\"popup__input_type_error\"),id:\"email-input\",type:\"email\",name:\"email\",minLength:\"2\",maxLength:\"40\",required:!0,placeholder:\"Email\",value:p,onChange:function(t){d(t.target.value),e.fieldValidator(t.target,x)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error  \".concat(\"\"!==g&&\"popup__error_visible\"),children:g}),Object(n.jsx)(\"input\",{className:\"login__input \".concat(\"\"!==y&&\"popup__input_type_error\"),id:\"password-input\",type:\"password\",name:\"password\",minLength:\"7\",maxLength:\"12\",required:!0,placeholder:\"Password\",value:m,onChange:function(t){b(t.target.value),e.fieldValidator(t.target,N)}}),Object(n.jsx)(\"span\",{className:\"popup__input-error \".concat(\"\"!==y&&\"popup__error_visible\"),children:y}),Object(n.jsx)(\"button\",{className:\"login__submit \".concat(L&&\"login__submit_disabled\"),disabled:L,type:\"submit\",children:\"\".concat(o?\"Loading...\":\"Sign Up\")})]}),Object(n.jsxs)(\"p\",{className:\"login__caption\",children:[\"Already a member? Log in \",Object(n.jsx)(r.b,{to:\"./login\",className:\"login__link\",children:\"here\"}),\"!\"]})]})})})),C=a(10),S=a(11),L=\"http://localhost:5000\",E=new(function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,[{key:\"register\",value:function(e,t){return fetch(\"\".concat(L,\"/signup\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"login\",value:function(e,t){return fetch(\"\".concat(L,\"/signin\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return localStorage.setItem(\"token\",e.token),e}))}},{key:\"authorize\",value:function(){return fetch(\"\".concat(L,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",authorization:\"\".concat(localStorage.getItem(\"token\"))}}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}}]),e}()),V=a(22),w=a(23),T=function(e){var t=e.component,a=Object(w.a)(e,[\"component\"]);return Object(n.jsx)(p.b,{children:function(){return a.loggedIn?Object(n.jsx)(t,Object(V.a)({},a)):Object(n.jsx)(p.a,{to:\"/login\"})}})};var P=function(e){return Object(n.jsx)(\"section\",{className:\"popup popup_type_tooltip \".concat(e.isOpen&&\"popup_state_opened\"),onClick:function(t){e.onOutsideClick(t,\"popup_type_tooltip\")},children:Object(n.jsx)(\"div\",{className:\"popup__container\",children:Object(n.jsxs)(\"div\",{className:\"popup__body\",children:[Object(n.jsx)(\"button\",{className:\"popup__close popup__close_type_tooltip\",type:\"button\",onClick:e.onClose}),Object(n.jsx)(\"div\",{className:\"\".concat(e.success?\"popup__icon_type_success\":\"popup__icon_type_failure\")}),Object(n.jsx)(\"h4\",{className:\"popup__title popup__title_type_bottom-margin-60\",children:e.success?\"Success! You have now been registered\":\"Oops, something went wrong! Please try again.\"})]})})})},U=new(function(){function e(t){var a=t.baseURL;Object(C.a)(this,e),this.baseURL=a}return Object(S.a)(e,[{key:\"setToken\",value:function(e){this.token=e}},{key:\"getUser\",value:function(){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{headers:{authorization:this.token}}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"getCards\",value:function(){return fetch(\"\".concat(this.baseURL,\"/cards\"),{headers:{authorization:this.token}}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"editProfile\",value:function(e,t){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"editAvatar\",value:function(e){return fetch(\"\".concat(this.baseURL,\"/users/me/avatar\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject(\"editAvatar Error: \".concat(e.statusText))}))}},{key:\"addCard\",value:function(e,t){return fetch(\"\".concat(this.baseURL,\"/cards\"),{method:\"POST\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"deleteCard\",value:function(e){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(e),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then((function(e){return e.ok?e.json():Promise.reject(\"Error: \".concat(e.statusText))}))}},{key:\"changeLikeCardStatus\",value:function(e,t){return t?this.deleteLike(e):this.addLike(e)}},{key:\"addLike\",value:function(e){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(e,\"/likes\"),{method:\"PUT\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then((function(e){return e.ok?e.json():Promise.reject(\"editLikes Error: \".concat(e.statusText))}))}},{key:\"deleteLike\",value:function(e){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(e,\"/likes\"),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then((function(e){return e.ok?e.json():Promise.reject(\"editLikes Error: \".concat(e.statusText))}))}}]),e}())({baseURL:L}),A=new(function(){function e(){Object(C.a)(this,e)}return Object(S.a)(e,[{key:\"formValidator\",value:function(e,t){return!!Array.from(e.querySelectorAll(t)).some((function(e){return!e.validity.valid}))}},{key:\"fieldValidator\",value:function(e,t){e.validity.valid?t(\"\"):t(e.validationMessage)}}]),e}());var I=function(){var e=Object(p.g)(),t=c.a.useState({link:\"#\"}),a=Object(l.a)(t,2),o=a[0],i=a[1],s=c.a.useState({}),r=Object(l.a)(s,2),d=r[0],m=r[1],b=c.a.useState([]),C=Object(l.a)(b,2),S=C[0],L=C[1],V=c.a.useState(!0),w=Object(l.a)(V,2),I=w[0],R=w[1],D=c.a.useState(!1),q=Object(l.a)(D,2),z=q[0],J=q[1],F=c.a.useState(!1),B=Object(l.a)(F,2),H=B[0],M=B[1],W=c.a.useState(!1),G=Object(l.a)(W,2),Y=G[0],$=G[1],K=c.a.useState(!1),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],ee=c.a.useState(!1),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],oe=c.a.useState(!1),ce=Object(l.a)(oe,2),ie=ce[0],se=ce[1],re=c.a.useState(!1),ue=Object(l.a)(re,2),le=ue[0],pe=ue[1],de=c.a.useState(!1),_e=Object(l.a)(de,2),je=_e[0],me=_e[1];function be(e){J(e),e||(m({}),localStorage.removeItem(\"token\"))}function fe(e){me(e),pe(!0)}function he(t,a){E.login(t,a).then((function(t){t?(be(!0),e.push(\"/\")):fe(!1)}))}function Oe(){M(!1),$(!1),Z(!1),ne(!1),se(!1),pe(!1),i({link:\"#\"})}function ge(e,t){e.target.className.includes(t)&&Oe()}var xe=c.a.useCallback((function(e){\"Escape\"===e.key&&Oe()}),[]);return c.a.useEffect((function(){return window.addEventListener(\"keydown\",xe),function(){window.removeEventListener(\"keydown\",xe)}}),[xe]),c.a.useEffect((function(){if(localStorage.getItem(\"token\")){var e=localStorage.getItem(\"token\");U.setToken(e),J(!0),U.getUser().then((function(e){m(e),U.getCards().then((function(e){L(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}R(!1)}),[d,z]),I?Object(n.jsx)(\"div\",{className:\"App page loading\",children:\"Loading page...\"}):Object(n.jsx)(\"div\",{className:\"App page\",children:Object(n.jsxs)(_.Provider,{value:d,children:[Object(n.jsx)(j,{loggedIn:z,login:be}),Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{path:\"/signup\",children:Object(n.jsx)(N,{formValidator:A.formValidator,fieldValidator:A.fieldValidator,registerUser:function(t,a){E.register(t,a).then((function(n){n?(fe(!0),e.push(\"/login\"),he(t,a)):fe(!1)}))}})}),Object(n.jsx)(p.b,{path:\"/login\",children:function(){return z?Object(n.jsx)(p.a,{to:\"/\"}):Object(n.jsx)(y,{formValidator:A.formValidator,fieldValidator:A.fieldValidator,logInUser:he})}}),Object(n.jsx)(T,{path:\"*\",loggedIn:z,component:f,onEditProfile:function(){M(!0)},onAddPlace:function(){$(!0)},onEditAvatar:function(){Z(!0)},onCardClick:function(e){se(!0),i(e)},card:o,cards:S,onCardLike:function(e){var t=e.likes.some((function(e){return e===d._id}));U.changeLikeCardStatus(e._id,t).then((function(t){var a=S.map((function(a){return a._id===e._id?t:a}));L(a)})).catch((function(e){console.log(e),alert(e)})).finally((function(){Oe()}))},onCardDelete:function(e){i(e),ne(!0)}})]}),Object(n.jsx)(h,{}),Object(n.jsx)(g,{isOpen:H,onClose:Oe,onUpdateUser:function(e,t){U.editProfile(e,t).then((function(e){m(e)})).catch((function(e){console.log(e),alert(e)})).finally((function(){Oe()}))},onOutsideClick:ge,formValidator:A.formValidator,fieldValidator:A.fieldValidator}),Object(n.jsx)(v,{isOpen:Y,onClose:Oe,onAddPlace:function(e,t){U.addCard(e,t).then((function(e){L([].concat(Object(u.a)(S),[e]))})).catch((function(e){console.log(e),alert(e)})).finally((function(){Oe()}))},onOutsideClick:ge,formValidator:A.formValidator,fieldValidator:A.fieldValidator}),Object(n.jsx)(x,{isOpen:X,onClose:Oe,onUpdateAvatar:function(e){U.editAvatar(e).then((function(e){m(e)})).catch((function(e){console.log(e),alert(e)})).finally((function(){Oe()}))},onOutsideClick:ge,formValidator:A.formValidator,fieldValidator:A.fieldValidator}),Object(n.jsx)(O,{card:o,isOpen:ie,onClose:Oe,onOutsideClick:ge}),Object(n.jsx)(k,{isOpen:ae,onClose:Oe,card:o,onDelete:function(e){U.deleteCard(e).then((function(){var t=S.filter((function(t){return t._id!==e}));L(t)})).catch((function(e){console.log(e),alert(e)})).finally((function(){Oe()}))},onOutsideClick:ge}),Object(n.jsx)(P,{isOpen:le,onClose:Oe,onOutsideClick:ge,success:je})]})})};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(r.a,{children:Object(n.jsx)(I,{})})}),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);","name":"static/js/main.b481ce3b.chunk.js","map":{"version":3,"sources":["static/js/main.b481ce3b.chunk.js"],"names":["this","push","29","module","exports","__webpack_require__","38","__webpack_exports__","r","jsx_runtime","react","react_default","n","react_dom","react_dom_default","react_router_dom","toConsumableArray","slicedToArray","react_router","logo","p","CurrentUserContext","a","createContext","components_Header","Object","props","currentUser","useContext","location","_React$useState","useState","_React$useState2","currentLocation","setLocation","_React$useState3","_React$useState4","showMenu","setShowMenu","useEffect","pathname","className","concat","loggedIn","children","src","alt","type","onClick","email","login","to","components_Card","isLiked","setIsLiked","isOwn","setIsOwn","_React$useState5","_React$useState6","likesLength","setlikesLength","card","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","length","onCardDelete","link","onCardClick","name","onCardLike","profile_img","components_Main","onEditAvatar","avatar","onEditProfile","aria-label","about","onAddPlace","cards","map","components_Footer","components_PopupWithImage","isOpen","e","onOutsideClick","onClose","components_EditProfilePopUp","loading","setLoading","setName","description","setDescription","setFormInvalid","formRef","useRef","_React$useState7","_React$useState8","nameError","setNameError","_React$useState9","_React$useState10","descriptionError","setDescriptionError","_React$useState11","_React$useState12","formInvalid","onSubmit","preventDefault","onUpdateUser","onChange","formValidator","current","ref","id","required","minLength","maxLength","placeholder","value","target","fieldValidator","disabled","components_EditAvatarPopup","setLink","linkError","setLinkError","onUpdateAvatar","components_AddPlacePopup","components_DeletePopup","onDelete","components_Login","setEmail","password","setPassword","emailError","setEmailError","passwordError","setPasswordError","logInUser","components_SignUp","registerUser","classCallCheck","createClass","config_baseURL","auth","Auth","key","fetch","method","headers","Accept","Content-Type","body","JSON","stringify","then","res","ok","json","Promise","reject","statusText","response","token","localStorage","setItem","authorization","getItem","objectSpread2","objectWithoutProperties","components_ProtectedRoute","_ref","Component","component","components_InfoTooltip","success","api","Api","baseURL","cardId","liked","deleteLike","addLike","FormValidator","form","selector","Array","from","querySelectorAll","inputElement","validity","valid","input","errorFunction","validationMessage","components_App","history","selectedCard","setselectedCard","setcurrentUser","setCards","setloggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState13","_React$useState14","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState15","_React$useState16","isEditAvatarPopupOpen","setisEditAvatarPopupOpen","_React$useState17","_React$useState18","isDeletePopupOpen","setisDeletePopupOpen","_React$useState19","_React$useState20","isCardOpen","setisCardOpen","_React$useState21","_React$useState22","isToolTipOpen","setisToolTipOpen","_React$useState23","_React$useState24","isSuccess","setisSuccess","handleLogin","isLoggedIn","removeItem","handleDisplayInfoTooltip","handleLogInUser","closeAllPopups","handleClickOutsideForm","includes","handleKeyPress","useCallback","window","addEventListener","removeEventListener","setToken","getUser","data","getCards","catch","err","console","log","Provider","path","register","changeLikeCardStatus","newCard","newCards","c","alert","finally","editProfile","addCard","editAvatar","deleteCard","filter","Boolean","hostname","match","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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"},"input":"(this[\"webpackJsonpreact-around-auth\"] = this[\"webpackJsonpreact-around-auth\"] || []).push([[0],{\n\n/***/ 29:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 38:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(19);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/images/logo.svg\n/* harmony default export */ var logo = (__webpack_require__.p + \"static/media/logo.6c4fd428.svg\");\n// CONCATENATED MODULE: ./src/contexts/CurrentUserContext.js\nvar CurrentUserContext=/*#__PURE__*/react_default.a.createContext();\n// CONCATENATED MODULE: ./src/components/Header.js\nfunction Header(props){var currentUser=react_default.a.useContext(CurrentUserContext);var location=Object(react_router[\"h\" /* useLocation */])();var _React$useState=react_default.a.useState('login'),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),currentLocation=_React$useState2[0],setLocation=_React$useState2[1];var _React$useState3=react_default.a.useState(false),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),showMenu=_React$useState4[0],setShowMenu=_React$useState4[1];function logOutUser(){props.login(false);setShowMenu(false);}function handleShowMenu(){setShowMenu(!showMenu);}//change the display depending on the current page. Default is signin page\n//what to display is determined in the return statement\nreact_default.a.useEffect(function(){if(location.pathname==='/signup'){setLocation('signup');}else if(location.pathname==='/login'){setLocation('login');}},[location]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"header\",{className:\"header \".concat(!props.loggedIn&&'header_state_loggedOut'),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"header__logo-menu\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"header__logo\",src:logo,alt:\"logo\"}),props.loggedIn&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"header__menu-icon \".concat(showMenu&&'header__menu-icon_state_closed'),type:\"button\",onClick:handleShowMenu})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"nav\",{className:\"header__nav \".concat(!showMenu&&props.loggedIn&&'header__nav_state_closed'),children:props.loggedIn?/*#__PURE__*/ //logged in\nObject(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"header__email\",children:currentUser.email}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"header__link_type_logout\",type:\"button\",onClick:logOutUser,children:\"Log out\"})]})://logged out\ncurrentLocation==='login'?/*#__PURE__*/ //login header\nObject(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"./signup\",className:\"header__link\",children:\"Sign up\"}):/*#__PURE__*/ //signup header\nObject(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"./login\",className:\"header__link\",children:\"Log in\"})})]});}/* harmony default export */ var components_Header = (Object(react_router[\"i\" /* withRouter */])(Header));\n// CONCATENATED MODULE: ./src/components/Card.js\nfunction Card(props){var _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),isLiked=_React$useState2[0],setIsLiked=_React$useState2[1];var _React$useState3=react_default.a.useState(false),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),isOwn=_React$useState4[0],setIsOwn=_React$useState4[1];var _React$useState5=react_default.a.useState(0),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),likesLength=_React$useState6[0],setlikesLength=_React$useState6[1];var currentUser=react_default.a.useContext(CurrentUserContext);function handleClick(){props.onCardClick(props.card);}function handleLike(){props.onCardLike(props.card);}function handleDelete(){props.onCardDelete(props.card);}//control delete button visibility\nreact_default.a.useEffect(function(){if(props.card.owner){props.card.owner===currentUser._id?setIsOwn(true):setIsOwn(false);}},[props.card]);//const isOwn = props.card.owner._id === currentUser._id;\nvar cardDeleteButtonClassName=\"element__delete-button \".concat(isOwn&&'element__delete-button_visibility_visible');//check if card was already liked\nreact_default.a.useEffect(function(){if(props.card.likes){props.card.likes.some(function(i){return i===currentUser._id;})?setIsLiked(true):setIsLiked(false);}},[props.card]);//const isLiked = props.card.likes.some(i => i._id === currentUser._id);\nvar cardLikeButtonClassName=\"element__like-button \".concat(isLiked&&'element__like-button_stateliked');//get number of likes\nreact_default.a.useEffect(function(){if(props.card.likes){setlikesLength(props.card.likes.length);}},[props.card]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:cardDeleteButtonClassName,onClick:handleDelete}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"element__image\",src:props.card.link,onClick:handleClick,alt:\"place\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"element__text\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"element__title\",children:props.card.name}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"element__likes-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:cardLikeButtonClassName,onClick:handleLike}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"element__likes-display\",children:likesLength})]})]})]});}/* harmony default export */ var components_Card = (Card);\n// CONCATENATED MODULE: ./src/images/profile-img.png\n/* harmony default export */ var profile_img = (__webpack_require__.p + \"static/media/profile-img.074e6423.png\");\n// CONCATENATED MODULE: ./src/components/Main.js\nfunction Main(props){var currentUser=react_default.a.useContext(CurrentUserContext);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"section\",{className:\"profile\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"profile__image-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"profile__image-overlay\",onClick:props.onEditAvatar}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"profile__image\",src:currentUser.avatar?currentUser.avatar:profile_img,alt:\"profile-img\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"profile__name\",children:currentUser.name?currentUser.name:'Jacques Cousteau'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"profile__edit-button\",onClick:props.onEditProfile,\"aria-label\":\"edit profile\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"profile__description\",children:currentUser.about?currentUser.about:'Explorer'})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"profile__add-button\",onClick:props.onAddPlace})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"elements\",children:props.cards.length>0?props.cards.map(function(card){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"element\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Card,{card:card,onCardClick:props.onCardClick,onCardLike:props.onCardLike,onCardDelete:props.onCardDelete})},card._id);}):/*#__PURE__*/ //show loading screen if cards haven't loaded\nObject(jsx_runtime[\"jsx\"])(\"div\",{className:\"loading\",children:\"Add your first place with the + button!\"})})]});}/* harmony default export */ var components_Main = (Main);\n// CONCATENATED MODULE: ./src/components/Footer.js\nfunction Footer(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"footer\",{className:\"footer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"footer__copyright\",children:\"\\xA9 2020 Around The U.S.\"})});}/* harmony default export */ var components_Footer = (Footer);\n// CONCATENATED MODULE: ./src/components/PopupWithImage.js\nfunction PopupWithImage(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_image \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup popup_type_image');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"popup__image-modal\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_image\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"figure\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"popup__image\",src:props.card&&props.card.link,alt:\"place\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"figcaption\",{className:\"popup__image-caption\"})]})]})})});}/* harmony default export */ var components_PopupWithImage = (PopupWithImage);\n// CONCATENATED MODULE: ./src/components/EditProfilePopUp.js\nfunction EditProfilePopUp(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];// Subscription to the context\nvar currentUser=react_default.a.useContext(CurrentUserContext);//form field\nvar _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=react_default.a.useState(''),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),description=_React$useState6[0],setDescription=_React$useState6[1];//reset form on open\nreact_default.a.useEffect(function(){setFormInvalid(true);setLoading(false);//set default values\ncurrentUser.name&&setName(currentUser.name);currentUser.about&&setDescription(currentUser.about);},[props.isOpen]);function handleSubmit(e){//check if the form is valid before sending\nif(!formInvalid){e.preventDefault();// Pass the values of the managed components to the external handler\nprops.onUpdateUser(name,description);//set loading\nsetLoading(true);}}/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=react_default.a.useRef();var _React$useState7=react_default.a.useState(''),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),nameError=_React$useState8[0],setNameError=_React$useState8[1];var _React$useState9=react_default.a.useState(''),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),descriptionError=_React$useState10[0],setDescriptionError=_React$useState10[1];var _React$useState11=react_default.a.useState(true),_React$useState12=Object(slicedToArray[\"a\" /* default */])(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleName(e){//set value\nsetName(e.target.value);//set error\nprops.fieldValidator(e.target,setNameError);}function handleDescription(e){//set value\nsetDescription(e.target.value);//set error\nprops.fieldValidator(e.target,setDescriptionError);}function validateForm(){props.formValidator(formRef.current,'.popup__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_edit-profile \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_edit-profile');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"popup__form popup__form_type_edit-profile\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_edit-profile\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"popup__title\",children:\"Edit Profile\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"popup__input popup__input-name \".concat(nameError!==''&&'popup__input_type_error'),id:\"name-input\",type:\"text\",name:\"name\",required:true,minLength:\"2\",maxLength:\"40\",placeholder:currentUser.name,value:name,onChange:handleName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error\\\" id=\\\"name-input-error \".concat(nameError!==''&&'popup__error_visible'),children:nameError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"popup__input popup__input-description \".concat(descriptionError!==''&&'popup__input_type_error'),id:\"description-input\",type:\"text\",name:\"description\",required:true,minLength:\"2\",maxLength:\"200\",placeholder:currentUser.about,value:description,onChange:handleDescription}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error\\\" id=\\\"description-input-error \".concat(descriptionError!==''&&'popup__error_visible'),children:descriptionError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__submit popup__edit-profile-submit \".concat(formInvalid&&'popup__submit_disabled'),disabled:formInvalid,type:\"submit\",children:\"\".concat(loading?'Loading...':'Save')})]})})});}/* harmony default export */ var components_EditProfilePopUp = (EditProfilePopUp);\n// CONCATENATED MODULE: ./src/components/EditAvatarPopup.js\nfunction EditAvatarPopup(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//form field\nvar _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),link=_React$useState4[0],setLink=_React$useState4[1];//reset form on open\nreact_default.a.useEffect(function(){setLink('');setFormInvalid(true);setLoading(false);},[props.isOpen]);function handleSubmit(e){if(!formInvalid){e.preventDefault();props.onUpdateAvatar(link);//set loading\nsetLoading(true);}}/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=react_default.a.useRef();var _React$useState5=react_default.a.useState(''),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),linkError=_React$useState6[0],setLinkError=_React$useState6[1];var _React$useState7=react_default.a.useState(true),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),formInvalid=_React$useState8[0],setFormInvalid=_React$useState8[1];function handleChange(e){//set value\nsetLink(e.target.value);//set error\nprops.fieldValidator(e.target,setLinkError);}function validateForm(){props.formValidator(formRef.current,'.popup__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_edit-avatar \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_edit-avatar');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"popup__form popup__form_type_edit-avatar\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_edit-avatar\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"popup__title\",children:\"Change profile picture\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"popup__input popup__input-avatar \".concat(linkError!==''&&'popup__input_type_error'),id:\"avatar-input\",type:\"url\",name:\"avatar\",value:link,placeholder:\"Image URL\",required:true,onChange:handleChange}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error \".concat(linkError!==''&&'popup__error_visible'),id:\"avatar-input-error\",children:linkError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__submit popup__edit-avatar-submit \".concat(formInvalid&&'popup__submit_disabled'),type:\"submit\",disabled:formInvalid,children:\"\".concat(loading?'Loading...':'Save')})]})})});}/* harmony default export */ var components_EditAvatarPopup = (EditAvatarPopup);\n// CONCATENATED MODULE: ./src/components/AddPlacePopup.js\nfunction AddPlacePopup(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//fields\nvar _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=react_default.a.useState(''),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),link=_React$useState6[0],setLink=_React$useState6[1];function handleSubmit(e){if(!formInvalid){e.preventDefault();// Pass the values of the managed components to the external handler\nprops.onAddPlace(name,link);//set loading\nsetLoading(true);}}react_default.a.useEffect(function(){setName('');setLink('');setFormInvalid(true);setLoading(false);},[props.isOpen]);/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=react_default.a.useRef();var _React$useState7=react_default.a.useState(''),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),nameError=_React$useState8[0],setNameError=_React$useState8[1];var _React$useState9=react_default.a.useState(''),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),linkError=_React$useState10[0],setLinkError=_React$useState10[1];var _React$useState11=react_default.a.useState(true),_React$useState12=Object(slicedToArray[\"a\" /* default */])(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleName(e){//set value\nsetName(e.target.value);//set error\nprops.fieldValidator(e.target,setNameError);}function handleLink(e){//set value\nsetLink(e.target.value);//set error\nprops.fieldValidator(e.target,setLinkError);}function validateForm(){props.formValidator(formRef.current,'.popup__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_add-card \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_add-card');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"popup__form popup__form_type_add-card\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_add-card\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"popup__title\",children:\"New Place\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"popup__input popup__input-card-name \".concat(nameError!==''&&'popup__input_type_error'),id:\"card-name-input\",type:\"text\",name:\"name\",placeholder:\"Title\",required:true,minLength:\"1\",maxLength:\"30\",value:name,onChange:handleName}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error\\\" id=\\\"card-name-input-error \".concat(nameError!==''&&'popup__error_visible'),children:nameError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"popup__input popup__input-card-url \".concat(linkError!==''&&'popup__input_type_error'),id:\"url-input\",type:\"url\",name:\"link\",placeholder:\"Image URL\",required:true,value:link,onChange:handleLink}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error \".concat(linkError!==''&&'popup__error_visible'),id:\"url-input-error\",children:linkError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__submit popup__add-card-submit \".concat(formInvalid&&'popup__submit_disabled'),disabled:formInvalid,type:\"submit\",children:\"\".concat(loading?'Loading...':'Create')})]})})});}/* harmony default export */ var components_AddPlacePopup = (AddPlacePopup);\n// CONCATENATED MODULE: ./src/components/DeletePopup.js\nfunction DeletePopup(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//reset form on open\nreact_default.a.useEffect(function(){setLoading(false);},[props.isOpen]);function handleSubmit(e){e.preventDefault();props.onDelete(props.card._id);//set loading\nsetLoading(true);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_delete \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_delete');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"popup__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_add-card\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"popup__title popup__title_type_no-bottom-margin\",children:\"Are you sure?\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__submit popup__delete-submit\",type:\"submit\",children:\"\".concat(loading?'Loading...':'Delete')})]})})});}/* harmony default export */ var components_DeletePopup = (DeletePopup);\n// CONCATENATED MODULE: ./src/components/Login.js\nfunction Login(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//form field\nvar _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),email=_React$useState4[0],setEmail=_React$useState4[1];var _React$useState5=react_default.a.useState(''),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),password=_React$useState6[0],setPassword=_React$useState6[1];//reset form on open\nreact_default.a.useEffect(function(){setFormInvalid(true);setLoading(false);},[]);function handleSubmit(e){e.preventDefault();if(!formInvalid){//check if the form is valid before sending\n//login user\nsetLoading(true);props.logInUser(email,password);//set loading\nsetLoading(false);}}/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=react_default.a.useRef();var _React$useState7=react_default.a.useState(''),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),emailError=_React$useState8[0],setEmailError=_React$useState8[1];var _React$useState9=react_default.a.useState(''),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),passwordError=_React$useState10[0],setPasswordError=_React$useState10[1];var _React$useState11=react_default.a.useState(true),_React$useState12=Object(slicedToArray[\"a\" /* default */])(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleEmail(e){//set value\nsetEmail(e.target.value);//set error\nprops.fieldValidator(e.target,setEmailError);}function handlePassword(e){//set value\nsetPassword(e.target.value);//set error\nprops.fieldValidator(e.target,setPasswordError);}function validateForm(){props.formValidator(formRef.current,'.login__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"login\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"login__container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"login__form\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"login__title\",children:\"Log in\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"login__input \".concat(emailError!==''&&'popup__input_type_error'),id:\"email-input\",type:\"email\",name:\"email\",minLength:\"2\",maxLength:\"40\",required:true,placeholder:\"Email\",value:email,onChange:handleEmail}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error  \".concat(emailError!==''&&'popup__error_visible'),children:emailError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"login__input \".concat(passwordError!==''&&'popup__input_type_error'),id:\"password-input\",type:\"password\",name:\"password\",minLength:\"7\",maxLength:\"12\",required:true,placeholder:\"Password\",value:password,onChange:handlePassword}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error \".concat(passwordError!==''&&'popup__error_visible'),children:passwordError}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"button\",{className:\"login__submit \".concat(formInvalid&&'login__submit_disabled'),disabled:formInvalid,type:\"submit\",children:[\"\".concat(loading?'Loading...':'Log In'),\" \"]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"login__caption\",children:[\"Not a member yet? Sign up \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"./signup\",className:\"login__link\",children:\"here\"}),\"!\"]})]})});}/* harmony default export */ var components_Login = (Object(react_router[\"i\" /* withRouter */])(Login));\n// CONCATENATED MODULE: ./src/components/SignUp.js\nfunction SignUp(props){//loading\nvar _React$useState=react_default.a.useState(false),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//form field\nvar _React$useState3=react_default.a.useState(''),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),email=_React$useState4[0],setEmail=_React$useState4[1];var _React$useState5=react_default.a.useState(''),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),password=_React$useState6[0],setPassword=_React$useState6[1];//reset form on open\nreact_default.a.useEffect(function(){setFormInvalid(true);setLoading(false);},[]);function handleSubmit(e){//check if the form is valid before sending\ne.preventDefault();if(!formInvalid){//register user\nsetLoading(true);props.registerUser(email,password);setLoading(false);}}/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=react_default.a.useRef();var _React$useState7=react_default.a.useState(''),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),emailError=_React$useState8[0],setEmailError=_React$useState8[1];var _React$useState9=react_default.a.useState(''),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),passwordError=_React$useState10[0],setPasswordError=_React$useState10[1];var _React$useState11=react_default.a.useState(true),_React$useState12=Object(slicedToArray[\"a\" /* default */])(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleEmail(e){//set value\nsetEmail(e.target.value);//set error\nprops.fieldValidator(e.target,setEmailError);}function handlePassword(e){//set value\nsetPassword(e.target.value);//set error\nprops.fieldValidator(e.target,setPasswordError);}function validateForm(){props.formValidator(formRef.current,'.login__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"login\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"login__container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"login__form\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{className:\"login__title\",children:\"Sign up\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"login__input \".concat(emailError!==''&&'popup__input_type_error'),id:\"email-input\",type:\"email\",name:\"email\",minLength:\"2\",maxLength:\"40\",required:true,placeholder:\"Email\",value:email,onChange:handleEmail}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error  \".concat(emailError!==''&&'popup__error_visible'),children:emailError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"login__input \".concat(passwordError!==''&&'popup__input_type_error'),id:\"password-input\",type:\"password\",name:\"password\",minLength:\"7\",maxLength:\"12\",required:true,placeholder:\"Password\",value:password,onChange:handlePassword}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"popup__input-error \".concat(passwordError!==''&&'popup__error_visible'),children:passwordError}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"login__submit \".concat(formInvalid&&'login__submit_disabled'),disabled:formInvalid,type:\"submit\",children:\"\".concat(loading?'Loading...':'Sign Up')})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"login__caption\",children:[\"Already a member? Log in \",/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"./login\",className:\"login__link\",children:\"here\"}),\"!\"]})]})});}/* harmony default export */ var components_SignUp = (Object(react_router[\"i\" /* withRouter */])(SignUp));\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(11);\n\n// CONCATENATED MODULE: ./src/utils/config.js\n/* external */ // export const token = '81e205aa-8028-44df-98a0-52d33fa82698';\n// export const groupId = 'group-4';\n// export const baseURL ='https://register.nomoreparties.co';\n/* backend */var config_baseURL='http://localhost:5000';\n// CONCATENATED MODULE: ./src/utils/auth.js\nvar auth_Auth=/*#__PURE__*/function(){function Auth(){Object(classCallCheck[\"a\" /* default */])(this,Auth);}Object(createClass[\"a\" /* default */])(Auth,[{key:\"register\",value:function register(email,password){return fetch(\"\".concat(config_baseURL,\"/signup\"),{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify({\"email\":email,\"password\":password})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"login\",value:function login(email,password){return fetch(\"\".concat(config_baseURL,\"/signin\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"email\":email,\"password\":password})}).then(function(response){return response.json();}).then(function(res){if(res.token){localStorage.setItem('token',res.token);return res;}});}},{key:\"authorize\",value:function authorize(){return fetch(\"\".concat(config_baseURL,\"/users/me\"),{method:'GET',headers:{'Content-Type':'application/json','authorization':\"\".concat(localStorage.getItem('token'))}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}}]);return Auth;}();var auth=new auth_Auth();\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js + 1 modules\nvar objectSpread2 = __webpack_require__(22);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(23);\n\n// CONCATENATED MODULE: ./src/components/ProtectedRoute.js\nvar ProtectedRoute_ProtectedRoute=function ProtectedRoute(_ref){var Component=_ref.component,props=Object(objectWithoutProperties[\"a\" /* default */])(_ref,[\"component\"]);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{children:function children(){return props.loggedIn?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component,Object(objectSpread2[\"a\" /* default */])({},props)):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/login\"});}});};/* harmony default export */ var components_ProtectedRoute = (ProtectedRoute_ProtectedRoute);\n// CONCATENATED MODULE: ./src/components/InfoTooltip.js\nfunction InfoTooltip(props){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"section\",{className:\"popup popup_type_tooltip \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_tooltip');},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"popup__container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"popup__body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"popup__close popup__close_type_tooltip\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"\".concat(props.success?'popup__icon_type_success':'popup__icon_type_failure')}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{className:\"popup__title popup__title_type_bottom-margin-60\",children:props.success?\"Success! You have now been registered\":\"Oops, something went wrong! Please try again.\"})]})})});}/* harmony default export */ var components_InfoTooltip = (InfoTooltip);\n// CONCATENATED MODULE: ./src/utils/api.js\n//import {token, groupId} from './config';\nvar api_Api=/*#__PURE__*/function(){function Api(_ref){var baseURL=_ref.baseURL;Object(classCallCheck[\"a\" /* default */])(this,Api);this.baseURL=baseURL;}Object(createClass[\"a\" /* default */])(Api,[{key:\"setToken\",value:function setToken(token){this.token=token;}/* API FUNCTIONS */},{key:\"getUser\",value:function getUser(){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{headers:{authorization:this.token}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"getCards\",value:function getCards(){return fetch(\"\".concat(this.baseURL,\"/cards\"),{headers:{authorization:this.token}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"editProfile\",value:function editProfile(name,about){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,about:about})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"editAvatar\",value:function editAvatar(link){return fetch(\"\".concat(this.baseURL,\"/users/me/avatar\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({avatar:link})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editAvatar Error: \".concat(res.statusText));});}},{key:\"addCard\",value:function addCard(name,link){return fetch(\"\".concat(this.baseURL,\"/cards\"),{method:\"POST\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,link:link})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,liked){return liked?this.deleteLike(cardId):this.addLike(cardId);}},{key:\"addLike\",value:function addLike(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editLikes Error: \".concat(res.statusText));});}},{key:\"deleteLike\",value:function deleteLike(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editLikes Error: \".concat(res.statusText));});}}]);return Api;}();var api=new api_Api({baseURL:config_baseURL});\n// CONCATENATED MODULE: ./src/utils/formvalidator.js\nvar formvalidator_FormValidator=/*#__PURE__*/function(){function FormValidator(){Object(classCallCheck[\"a\" /* default */])(this,FormValidator);}Object(createClass[\"a\" /* default */])(FormValidator,[{key:\"formValidator\",//validate a form\nvalue:function formValidator(form,selector){var inputList=Array.from(form.querySelectorAll(selector));return inputList.some(function(inputElement){return!inputElement.validity.valid;})?true:false;}//valid individual field\n},{key:\"fieldValidator\",value:function fieldValidator(input,errorFunction){!input.validity.valid?errorFunction(input.validationMessage):errorFunction('');}}]);return FormValidator;}();var formValidator=new formvalidator_FormValidator();\n// CONCATENATED MODULE: ./src/components/App.js\n//component\n//login\n//context\n//util\nfunction App(){//history\nvar history=Object(react_router[\"g\" /* useHistory */])();//state\nvar _React$useState=react_default.a.useState({link:'#'}),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),selectedCard=_React$useState2[0],setselectedCard=_React$useState2[1];var _React$useState3=react_default.a.useState({}),_React$useState4=Object(slicedToArray[\"a\" /* default */])(_React$useState3,2),currentUser=_React$useState4[0],setcurrentUser=_React$useState4[1];var _React$useState5=react_default.a.useState([]),_React$useState6=Object(slicedToArray[\"a\" /* default */])(_React$useState5,2),cards=_React$useState6[0],setCards=_React$useState6[1];var _React$useState7=react_default.a.useState(true),_React$useState8=Object(slicedToArray[\"a\" /* default */])(_React$useState7,2),loading=_React$useState8[0],setLoading=_React$useState8[1];var _React$useState9=react_default.a.useState(false),_React$useState10=Object(slicedToArray[\"a\" /* default */])(_React$useState9,2),loggedIn=_React$useState10[0],setloggedIn=_React$useState10[1];//isOpen props for popups\nvar _React$useState11=react_default.a.useState(false),_React$useState12=Object(slicedToArray[\"a\" /* default */])(_React$useState11,2),isEditProfilePopupOpen=_React$useState12[0],setIsEditProfilePopupOpen=_React$useState12[1];var _React$useState13=react_default.a.useState(false),_React$useState14=Object(slicedToArray[\"a\" /* default */])(_React$useState13,2),isAddPlacePopupOpen=_React$useState14[0],setIsAddPlacePopupOpen=_React$useState14[1];var _React$useState15=react_default.a.useState(false),_React$useState16=Object(slicedToArray[\"a\" /* default */])(_React$useState15,2),isEditAvatarPopupOpen=_React$useState16[0],setisEditAvatarPopupOpen=_React$useState16[1];var _React$useState17=react_default.a.useState(false),_React$useState18=Object(slicedToArray[\"a\" /* default */])(_React$useState17,2),isDeletePopupOpen=_React$useState18[0],setisDeletePopupOpen=_React$useState18[1];var _React$useState19=react_default.a.useState(false),_React$useState20=Object(slicedToArray[\"a\" /* default */])(_React$useState19,2),isCardOpen=_React$useState20[0],setisCardOpen=_React$useState20[1];var _React$useState21=react_default.a.useState(false),_React$useState22=Object(slicedToArray[\"a\" /* default */])(_React$useState21,2),isToolTipOpen=_React$useState22[0],setisToolTipOpen=_React$useState22[1];var _React$useState23=react_default.a.useState(false),_React$useState24=Object(slicedToArray[\"a\" /* default */])(_React$useState23,2),isSuccess=_React$useState24[0],setisSuccess=_React$useState24[1];//update user functions\nfunction handleUpdateUser(name,about){api.editProfile(name,about).then(function(data){setcurrentUser(data);}).catch(function(err){console.log(err);alert(err);}).finally(function(){closeAllPopups();});}function handleUpdateAvatar(link){api.editAvatar(link).then(function(data){setcurrentUser(data);}).catch(function(err){console.log(err);alert(err);}).finally(function(){closeAllPopups();});}//card functions\nfunction handleDeleteClick(card){setselectedCard(card);setisDeletePopupOpen(true);}function handleCardClick(card){setisCardOpen(true);setselectedCard(card);}function handleCardLike(card){// Check one more time if this card was already liked\n//const isLiked = card.likes.some(i => i._id === currentUser._id);\nvar isLiked=card.likes.some(function(i){return i===currentUser._id;});// Send a request to the API and getting the updated card data\napi.changeLikeCardStatus(card._id,isLiked).then(function(newCard){// Create a new array based on the existing one and putting a new card into it\nvar newCards=cards.map(function(c){return c._id===card._id?newCard:c;});// Update the state\nsetCards(newCards);}).catch(function(err){console.log(err);alert(err);}).finally(function(){closeAllPopups();});}function handleCardDelete(cardId){//delete the card\napi.deleteCard(cardId).then(function(){var newCards=cards.filter(function(c){return c._id!==cardId;});setCards(newCards);}).catch(function(err){console.log(err);alert(err);}).finally(function(){closeAllPopups();});}//popup functions\nfunction handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleEditAvatarClick(){setisEditAvatarPopupOpen(true);}function handleAddPlaceSubmit(name,link){api.addCard(name,link).then(function(newCard){setCards([].concat(Object(toConsumableArray[\"a\" /* default */])(cards),[newCard]));}).catch(function(err){console.log(err);alert(err);}).finally(function(){closeAllPopups();});}//login functions\nfunction handleLogin(isLoggedIn){setloggedIn(isLoggedIn);if(!isLoggedIn){//delete token\nsetcurrentUser({});localStorage.removeItem('token');}}function handleDisplayInfoTooltip(success){setisSuccess(success);setisToolTipOpen(true);}function handleRegisterUser(email,password){auth.register(email,password).then(function(res){if(res){handleDisplayInfoTooltip(true);history.push(\"/login\");handleLogInUser(email,password);}else{handleDisplayInfoTooltip(false);}});}function handleLogInUser(email,password){auth.login(email,password).then(function(res){if(res){handleLogin(true);history.push(\"/\");}else{handleDisplayInfoTooltip(false);}});}//close and reset popups\nfunction closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setisEditAvatarPopupOpen(false);setisDeletePopupOpen(false);setisCardOpen(false);setisToolTipOpen(false);setselectedCard({link:'#'});}//click outside container \nfunction handleClickOutsideForm(e,selector){if(e.target.className.includes(selector)){closeAllPopups();}}//close window when escape is pressed\nvar handleKeyPress=react_default.a.useCallback(function(e){if(e.key==='Escape'){closeAllPopups();}},[]);//add Escape event\nreact_default.a.useEffect(function(){window.addEventListener('keydown',handleKeyPress);return function(){window.removeEventListener('keydown',handleKeyPress);};},[handleKeyPress]);//get user and initial cards\nreact_default.a.useEffect(function(){//get user from token\nif(localStorage.getItem('token')){var token=localStorage.getItem('token');api.setToken(token);setloggedIn(true);api.getUser().then(function(data){setcurrentUser(data);//get cards\napi.getCards().then(function(data){setCards(data);}).catch(function(err){console.log(err);});}).catch(function(err){console.log(err);});}//after loading everything, set loading to false\nsetLoading(false);},[currentUser,loggedIn]);return(//show loading message if user and cards are not loaded\nloading?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App page loading\",children:\"Loading page...\"}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App page\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Header,{loggedIn:loggedIn,login:handleLogin}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"d\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/signup\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_SignUp,{formValidator:formValidator.formValidator,fieldValidator:formValidator.fieldValidator,registerUser:handleRegisterUser})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"b\" /* Route */],{path:\"/login\",children:function children(){return!loggedIn?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Login,{formValidator:formValidator.formValidator,fieldValidator:formValidator.fieldValidator,logInUser:handleLogInUser}):/*#__PURE__*/ //redirect to main if already logged in\nObject(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Redirect */],{to:\"/\"});}}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_ProtectedRoute,{path:\"*\",loggedIn:loggedIn,component:components_Main,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,card:selectedCard,cards:cards,onCardLike:handleCardLike,onCardDelete:handleDeleteClick})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Footer,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_EditProfilePopUp,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser,onOutsideClick:handleClickOutsideForm,formValidator:formValidator.formValidator,fieldValidator:formValidator.fieldValidator}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit,onOutsideClick:handleClickOutsideForm,formValidator:formValidator.formValidator,fieldValidator:formValidator.fieldValidator}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar,onOutsideClick:handleClickOutsideForm,formValidator:formValidator.formValidator,fieldValidator:formValidator.fieldValidator}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_PopupWithImage,{card:selectedCard,isOpen:isCardOpen,onClose:closeAllPopups,onOutsideClick:handleClickOutsideForm}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_DeletePopup,{isOpen:isDeletePopupOpen,onClose:closeAllPopups,card:selectedCard,onDelete:handleCardDelete,onOutsideClick:handleClickOutsideForm}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_InfoTooltip,{isOpen:isToolTipOpen,onClose:closeAllPopups,onOutsideClick:handleClickOutsideForm,success:isSuccess})]})}));}/* harmony default export */ var components_App = (App);\n// CONCATENATED MODULE: ./src/serviceWorker.js\n// This optional code is used to register a service worker.\n// register() is not called by default.\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\nvar isLocalhost=Boolean(window.location.hostname==='localhost'||// [::1] is the IPv6 localhost address.\nwindow.location.hostname==='[::1]'||// 127.0.0.0/8 are considered localhost for IPv4.\nwindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function serviceWorker_register(config){if( true&&'serviceWorker'in navigator){// The URL constructor is available in all browsers that support SW.\nvar publicUrl=new URL(\"\",window.location.href);if(publicUrl.origin!==window.location.origin){// Our service worker won't work if PUBLIC_URL is on a different origin\n// from what our page is served on. This might happen if a CDN is used to\n// serve assets; see https://github.com/facebook/create-react-app/issues/2374\nreturn;}window.addEventListener('load',function(){var swUrl=\"\".concat(\"\",\"/service-worker.js\");if(isLocalhost){// This is running on localhost. Let's check if a service worker still exists or not.\ncheckValidServiceWorker(swUrl,config);// Add some additional logging to localhost, pointing developers to the\n// service worker/PWA documentation.\nnavigator.serviceWorker.ready.then(function(){console.log('This web app is being served cache-first by a service '+'worker. To learn more, visit https://bit.ly/CRA-PWA');});}else{// Is not localhost. Just register service worker\nregisterValidSW(swUrl,config);}});}}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(function(registration){registration.onupdatefound=function(){var installingWorker=registration.installing;if(installingWorker==null){return;}installingWorker.onstatechange=function(){if(installingWorker.state==='installed'){if(navigator.serviceWorker.controller){// At this point, the updated precached content has been fetched,\n// but the previous service worker will still serve the older\n// content until all client tabs are closed.\nconsole.log('New content is available and will be used when all '+'tabs for this page are closed. See https://bit.ly/CRA-PWA.');// Execute callback\nif(config&&config.onUpdate){config.onUpdate(registration);}}else{// At this point, everything has been precached.\n// It's the perfect time to display a\n// \"Content is cached for offline use.\" message.\nconsole.log('Content is cached for offline use.');// Execute callback\nif(config&&config.onSuccess){config.onSuccess(registration);}}}};};}).catch(function(error){console.error('Error during service worker registration:',error);});}function checkValidServiceWorker(swUrl,config){// Check if the service worker can be found. If it can't reload the page.\nfetch(swUrl,{headers:{'Service-Worker':'script'}}).then(function(response){// Ensure service worker exists, and that we really are getting a JS file.\nvar contentType=response.headers.get('content-type');if(response.status===404||contentType!=null&&contentType.indexOf('javascript')===-1){// No service worker found. Probably a different app. Reload the page.\nnavigator.serviceWorker.ready.then(function(registration){registration.unregister().then(function(){window.location.reload();});});}else{// Service worker found. Proceed as normal.\nregisterValidSW(swUrl,config);}}).catch(function(){console.log('No internet connection found. App is running in offline mode.');});}function unregister(){if('serviceWorker'in navigator){navigator.serviceWorker.ready.then(function(registration){registration.unregister();}).catch(function(error){console.error(error.message);});}}\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_App,{})})}),document.getElementById('root'));// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nunregister();\n\n/***/ })\n\n},[[38,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\src\\index.css","C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\node_modules\\file-loader\\dist\\cjs.js??ref--5-oneOf-8!C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\src\\images\\logo.svg","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/contexts/CurrentUserContext.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Header.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Card.js","C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\node_modules\\url-loader\\dist\\cjs.js??ref--5-oneOf-1!C:\\Users\\ZEE\\Yandex\\react-around-api-full\\frontend\\src\\images\\profile-img.png","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Main.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Footer.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/PopupWithImage.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/EditProfilePopUp.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/EditAvatarPopup.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/AddPlacePopup.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/DeletePopup.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Login.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/SignUp.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/utils/config.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/utils/auth.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/ProtectedRoute.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/InfoTooltip.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/utils/api.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/utils/formvalidator.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/App.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/serviceWorker.js","C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/index.js"],"names":["CurrentUserContext","React","createContext","Header","props","currentUser","useContext","location","useLocation","useState","currentLocation","setLocation","showMenu","setShowMenu","logOutUser","login","handleShowMenu","useEffect","pathname","loggedIn","logo","email","withRouter","Card","isLiked","setIsLiked","isOwn","setIsOwn","likesLength","setlikesLength","handleClick","onCardClick","card","handleLike","onCardLike","handleDelete","onCardDelete","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","length","link","name","Main","onEditAvatar","avatar","defaultAvatar","onEditProfile","about","onAddPlace","cards","map","Footer","PopupWithImage","isOpen","e","onOutsideClick","onClose","EditProfilePopUp","loading","setLoading","setName","description","setDescription","setFormInvalid","handleSubmit","formInvalid","preventDefault","onUpdateUser","formRef","useRef","nameError","setNameError","descriptionError","setDescriptionError","handleName","target","value","fieldValidator","handleDescription","validateForm","formValidator","current","EditAvatarPopup","setLink","onUpdateAvatar","linkError","setLinkError","handleChange","AddPlacePopup","handleLink","DeletePopup","onDelete","Login","setEmail","password","setPassword","logInUser","emailError","setEmailError","passwordError","setPasswordError","handleEmail","handlePassword","SignUp","registerUser","baseURL","Auth","fetch","BASE_URL","method","headers","body","JSON","stringify","then","res","ok","json","Promise","reject","statusText","response","token","localStorage","setItem","getItem","auth","ProtectedRoute","Component","component","InfoTooltip","success","Api","authorization","cardId","liked","deleteLike","addLike","api","FormValidator","form","selector","inputList","Array","from","querySelectorAll","inputElement","validity","valid","input","errorFunction","validationMessage","App","history","useHistory","selectedCard","setselectedCard","setcurrentUser","setCards","setloggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setisEditAvatarPopupOpen","isDeletePopupOpen","setisDeletePopupOpen","isCardOpen","setisCardOpen","isToolTipOpen","setisToolTipOpen","isSuccess","setisSuccess","handleUpdateUser","editProfile","data","catch","err","console","log","alert","finally","closeAllPopups","handleUpdateAvatar","editAvatar","handleDeleteClick","handleCardClick","handleCardLike","changeLikeCardStatus","newCard","newCards","c","handleCardDelete","deleteCard","filter","handleEditProfileClick","handleAddPlaceClick","handleEditAvatarClick","handleAddPlaceSubmit","addCard","handleLogin","isLoggedIn","removeItem","handleDisplayInfoTooltip","handleRegisterUser","register","push","handleLogInUser","handleClickOutsideForm","className","includes","handleKeyPress","useCallback","key","window","addEventListener","removeEventListener","setToken","getUser","getCards","isLocalhost","Boolean","hostname","match","config","process","navigator","publicUrl","URL","href","origin","swUrl","checkValidServiceWorker","serviceWorker","ready","registerValidSW","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","error","contentType","get","status","indexOf","unregister","reload","message","ReactDOM","render","document","getElementById"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAe,8DAAuB,mCAAmC,E;;ACElE,GAAMA,mBAAkB,cAAGC,eAAK,CAACC,aAAN,EAA3B,C;;ACGP,QAASC,OAAT,CAAgBC,KAAhB,CAAuB,CACrB,GAAMC,YAAW,CAAGJ,eAAK,CAACK,UAAN,CAAiBN,kBAAjB,CAApB,CACA,GAAMO,SAAQ,CAAGC,2CAAW,EAA5B,CAFqB,oBAGkBP,eAAK,CAACQ,QAAN,CAAe,OAAf,CAHlB,8EAGdC,eAHc,qBAGGC,WAHH,0CAIWV,eAAK,CAACQ,QAAN,CAAe,KAAf,CAJX,+EAIdG,QAJc,qBAIJC,WAJI,qBAMrB,QAASC,WAAT,EAAqB,CACnBV,KAAK,CAACW,KAAN,CAAY,KAAZ,EACAF,WAAW,CAAC,KAAD,CAAX,CACD,CAED,QAASG,eAAT,EAAyB,CACvBH,WAAW,CAAC,CAACD,QAAF,CAAX,CACD,CAED;AACA;AACAX,eAAK,CAACgB,SAAN,CAAgB,UAAM,CACpB,GAAGV,QAAQ,CAACW,QAAT,GAAsB,SAAzB,CAAoC,CAClCP,WAAW,CAAC,QAAD,CAAX,CACD,CAFD,IAGK,IAAGJ,QAAQ,CAACW,QAAT,GAAsB,QAAzB,CAAkC,CACrCP,WAAW,CAAC,OAAD,CAAX,CACD,CACF,CAPD,CAOG,CAACJ,QAAD,CAPH,EASA,mBACE,sCAAQ,SAAS,kBAAY,CAACH,KAAK,CAACe,QAAP,EAAmB,wBAA/B,CAAjB,wBACE,mCAAK,SAAS,CAAC,mBAAf,wBACE,kCAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEC,IAAnC,CAAyC,GAAG,CAAC,MAA7C,EADF,CAEGhB,KAAK,CAACe,QAAN,eAAkB,qCAAQ,SAAS,6BAAuBP,QAAQ,EAAK,gCAApC,CAAjB,CAAyF,IAAI,CAAC,QAA9F,CAAuG,OAAO,CAAEI,cAAhH,EAFrB,GADF,cAKE,kCAAK,SAAS,uBAAkB,CAACJ,QAAD,EAAaR,KAAK,CAACe,QAApB,EAAiC,0BAAlD,CAAd,UACGf,KAAK,CAACe,QAAN,eACD;AACA,4EAAE,gCAAG,SAAS,CAAC,eAAb,UAA8Bd,WAAW,CAACgB,KAA1C,EAAF,cACA,qCAAQ,SAAS,CAAC,0BAAlB,CAA6C,IAAI,CAAC,QAAlD,CAA2D,OAAO,CAAEP,UAApE,qBADA,GAFC,CAID;AACAJ,eAAe,GAAK,OAApB,eACE;AACA,2BAAC,gCAAD,EAAM,EAAE,CAAC,UAAT,CAAoB,SAAS,CAAC,cAA9B,qBAFF,eAGE;AACA,2BAAC,gCAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,cAA7B,oBAVJ,EALF,GADF,CAmBE,CAEWY,gGAAU,CAACnB,MAAD,CAAzB,E;;AClDA,QAASoB,KAAT,CAAcnB,KAAd,CAAoB,qBAEYH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFZ,8EAEXe,OAFW,qBAEFC,UAFE,0CAGQxB,eAAK,CAACQ,QAAN,CAAe,KAAf,CAHR,+EAGXiB,KAHW,qBAGJC,QAHI,0CAIoB1B,eAAK,CAACQ,QAAN,CAAe,CAAf,CAJpB,+EAIXmB,WAJW,qBAIEC,cAJF,qBAMlB,GAAMxB,YAAW,CAAGJ,eAAK,CAACK,UAAN,CAAiBN,kBAAjB,CAApB,CAEA,QAAS8B,YAAT,EAAuB,CACrB1B,KAAK,CAAC2B,WAAN,CAAkB3B,KAAK,CAAC4B,IAAxB,EACD,CAED,QAASC,WAAT,EAAsB,CACpB7B,KAAK,CAAC8B,UAAN,CAAiB9B,KAAK,CAAC4B,IAAvB,EACD,CAED,QAASG,aAAT,EAAwB,CACtB/B,KAAK,CAACgC,YAAN,CAAmBhC,KAAK,CAAC4B,IAAzB,EACD,CAED;AACA/B,eAAK,CAACgB,SAAN,CAAgB,UAAM,CACpB,GAAGb,KAAK,CAAC4B,IAAN,CAAWK,KAAd,CAAoB,CAClBjC,KAAK,CAAC4B,IAAN,CAAWK,KAAX,GAAqBhC,WAAW,CAACiC,GAAjC,CAAuCX,QAAQ,CAAC,IAAD,CAA/C,CAAwDA,QAAQ,CAAC,KAAD,CAAhE,CACD,CACF,CAJD,CAIE,CAACvB,KAAK,CAAC4B,IAAP,CAJF,EAKA;AAEA,GAAMO,0BAAyB,kCACHb,KAAK,EAAI,2CADN,CAA/B,CAIA;AACAzB,eAAK,CAACgB,SAAN,CAAgB,UAAM,CACpB,GAAGb,KAAK,CAAC4B,IAAN,CAAWQ,KAAd,CAAoB,CAClBpC,KAAK,CAAC4B,IAAN,CAAWQ,KAAX,CAAiBC,IAAjB,CAAsB,SAAAC,CAAC,QAAIA,EAAC,GAAKrC,WAAW,CAACiC,GAAtB,EAAvB,EAAoDb,UAAU,CAAC,IAAD,CAA9D,CAAuEA,UAAU,CAAC,KAAD,CAAjF,CACD,CACF,CAJD,CAIE,CAACrB,KAAK,CAAC4B,IAAP,CAJF,EAKA;AAEA,GAAMW,wBAAuB,gCAA2BnB,OAAO,EAAI,iCAAtC,CAA7B,CAEA;AACAvB,eAAK,CAACgB,SAAN,CAAgB,UAAM,CACpB,GAAGb,KAAK,CAAC4B,IAAN,CAAWQ,KAAd,CAAoB,CAClBX,cAAc,CAACzB,KAAK,CAAC4B,IAAN,CAAWQ,KAAX,CAAiBI,MAAlB,CAAd,CACD,CACF,CAJD,CAIE,CAACxC,KAAK,CAAC4B,IAAP,CAJF,EAMA,mBACA,4EACA,kCAAK,SAAS,CAAEO,yBAAhB,CAA2C,OAAO,CAAEJ,YAApD,EADA,cAEA,kCAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAE/B,KAAK,CAAC4B,IAAN,CAAWa,IAAhD,CAAsD,OAAO,CAAEf,WAA/D,CAA4E,GAAG,CAAC,OAAhF,EAFA,cAGA,mCAAK,SAAS,CAAC,eAAf,wBACE,iCAAI,SAAS,CAAC,gBAAd,UAAgC1B,KAAK,CAAC4B,IAAN,CAAWc,IAA3C,EADF,cAEE,mCAAK,SAAS,CAAC,0BAAf,wBACE,qCAAQ,SAAS,CAAEH,uBAAnB,CAA4C,OAAO,CAAEV,UAArD,EADF,cAEE,gCAAG,SAAS,CAAC,wBAAb,UAAuCL,WAAvC,EAFF,GAFF,GAHA,GADA,CAaD,CAEcL,wDAAf,E;;AClEe,qEAAuB,0CAA0C,E;;ACOhF,QAASwB,KAAT,CAAc3C,KAAd,CAAqB,CACnB,GAAMC,YAAW,CAAGJ,eAAK,CAACK,UAAN,CAAiBN,kBAAjB,CAApB,CAEA,mBACA,4EACA,uCAAS,SAAS,CAAC,SAAnB,wBACE,mCAAK,SAAS,CAAC,0BAAf,wBACE,kCAAK,SAAS,CAAC,wBAAf,CAAwC,OAAO,CAAEI,KAAK,CAAC4C,YAAvD,EADF,cAEE,kCAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAE3C,WAAW,CAAC4C,MAAZ,CAAqB5C,WAAW,CAAC4C,MAAjC,CAA0CC,WAA/E,CAA8F,GAAG,CAAC,aAAlG,EAFF,GADF,cAKE,mCAAK,SAAS,CAAC,eAAf,wBACF,iCAAI,SAAS,CAAC,eAAd,UAA+B7C,WAAW,CAACyC,IAAZ,CAAmBzC,WAAW,CAACyC,IAA/B,CAAsC,kBAArE,EADE,cAEE,qCAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAE1C,KAAK,CAAC+C,aAAxD,CAAuE,aAAW,cAAlF,EAFF,cAGF,gCAAG,SAAS,CAAC,sBAAb,UAAqC9C,WAAW,CAAC+C,KAAZ,CAAoB/C,WAAW,CAAC+C,KAAhC,CAAwC,UAA7E,EAHE,GALF,cAUE,qCAAQ,SAAS,CAAC,qBAAlB,CAAwC,OAAO,CAAEhD,KAAK,CAACiD,UAAvD,EAVF,GADA,cAcA,sCAAS,SAAS,CAAC,UAAnB,UACGjD,KAAK,CAACkD,KAAN,CAAYV,MAAZ,CAAqB,CAArB,CACAxC,KAAK,CAACkD,KAAN,CAAYC,GAAZ,CAAgB,SAAAvB,IAAI,qBACnB,kCAAK,SAAS,CAAC,SAAf,uBACE,2BAAC,eAAD,EAAM,IAAI,CAAEA,IAAZ,CAAkB,WAAW,CAAI5B,KAAK,CAAC2B,WAAvC,CAAoD,UAAU,CAAE3B,KAAK,CAAC8B,UAAtE,CAAkF,YAAY,CAAE9B,KAAK,CAACgC,YAAtG,EADF,EAA8BJ,IAAI,CAACM,GAAnC,CADmB,EAApB,CADA,eAQD;AACA,kCAAK,SAAS,CAAC,SAAf,qDAVF,EAdA,GADA,CA6BA,CAEaS,wDAAf,E;;ACvCA,QAASS,OAAT,EAAkB,CAChB,mBACA,qCAAQ,SAAS,CAAC,QAAlB,uBACE,gCAAG,SAAS,CAAC,mBAAb,uCADF,EADA,CAKD,CAEcA,4DAAf,E;;ACRA,QAASC,eAAT,CAAwBrD,KAAxB,CAA+B,CAE7B,mBACE,sCAAS,SAAS,kCAA4BA,KAAK,CAACsD,MAAN,EAAgB,oBAA5C,CAAlB,CAAuF,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,wBAAvB,EAAiD,CAAvJ,uBACA,kCAAK,SAAS,CAAC,kBAAf,uBACE,mCAAK,SAAS,CAAC,oBAAf,wBACE,qCAAQ,SAAS,CAAC,sCAAlB,CAAyD,IAAI,CAAC,QAA9D,CAAuE,OAAO,CAAEvD,KAAK,CAACyD,OAAtF,EADF,cAEE,6DACE,kCAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEzD,KAAK,CAAC4B,IAAN,EAAc5B,KAAK,CAAC4B,IAAN,CAAWa,IAA5D,CAAkE,GAAG,CAAC,OAAtE,EADF,cAEE,yCAAY,SAAS,CAAC,sBAAtB,EAFF,GAFF,GADF,EADA,EADF,CAaD,CAEcY,4EAAf,E;;AChBA,QAASK,iBAAT,CAA0B1D,KAA1B,CAAgC,CAC5B;AAD4B,oBAEAH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFA,8EAEvBsD,OAFuB,qBAEdC,UAFc,qBAG9B;AACA,GAAM3D,YAAW,CAAGJ,eAAK,CAACK,UAAN,CAAiBN,kBAAjB,CAApB,CACE;AAL4B,qBAMNC,eAAK,CAACQ,QAAN,CAAe,EAAf,CANM,+EAMvBqC,IANuB,qBAMjBmB,OANiB,0CAOQhE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAPR,+EAOvByD,WAPuB,qBAOVC,cAPU,qBAS9B;AACAlE,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClBmD,cAAc,CAAC,IAAD,CAAd,CACAJ,UAAU,CAAC,KAAD,CAAV,CAEA;AACA3D,WAAW,CAACyC,IAAZ,EAAoBmB,OAAO,CAAC5D,WAAW,CAACyC,IAAb,CAA3B,CACAzC,WAAW,CAAC+C,KAAZ,EAAqBe,cAAc,CAAC9D,WAAW,CAAC+C,KAAb,CAAnC,CACD,CAPD,CAOE,CAAChD,KAAK,CAACsD,MAAP,CAPF,EASA,QAASW,aAAT,CAAsBV,CAAtB,CAAyB,CACvB;AACA,GAAG,CAACW,WAAJ,CAAgB,CACdX,CAAC,CAACY,cAAF,GACA;AACAnE,KAAK,CAACoE,YAAN,CAAmB1B,IAAnB,CAAyBoB,WAAzB,EAEA;AACAF,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IACE,GAAMS,QAAO,CAAGxE,eAAK,CAACyE,MAAN,EAAhB,CAxC8B,qBAyCIzE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAzCJ,+EAyCvBkE,SAzCuB,qBAyCZC,YAzCY,0CA0CkB3E,eAAK,CAACQ,QAAN,CAAe,EAAf,CA1ClB,gFA0CvBoE,gBA1CuB,sBA0CLC,mBA1CK,4CA2CQ7E,eAAK,CAACQ,QAAN,CAAe,IAAf,CA3CR,iFA2CvB6D,WA3CuB,sBA2CVF,cA3CU,sBA6ChC,QAASW,WAAT,CAAoBpB,CAApB,CAAuB,CACrB;AACAM,OAAO,CAACN,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAP,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BJ,YAA/B,EACD,CAED,QAASO,kBAAT,CAA2BxB,CAA3B,CAA8B,CAC5B;AACAQ,cAAc,CAACR,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAd,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BF,mBAA/B,EACD,CAEC,QAASM,aAAT,EAAuB,CACrBhF,KAAK,CAACiF,aAAN,CAAoBZ,OAAO,CAACa,OAA5B,CAAoC,eAApC,EAAuDlB,cAAc,CAAC,IAAD,CAArE,CAA8EA,cAAc,CAAC,KAAD,CAA5F,CACD,CAED,mBACE,sCAAS,SAAS,yCAAmChE,KAAK,CAACsD,MAAN,EAAiB,oBAApD,CAAlB,CAA8F,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,yBAAvB,EAAkD,CAA/J,uBACA,kCAAK,SAAS,CAAC,kBAAf,uBACE,oCAAM,SAAS,4CAAf,CAA8D,QAAQ,CAAEU,YAAxE,CAAsF,QAAQ,CAAEe,YAAhG,CAA8G,GAAG,CAAEX,OAAnH,wBACE,qCAAQ,SAAS,8CAAjB,CAAkE,IAAI,CAAC,QAAvE,CAAgF,OAAO,CAAErE,KAAK,CAACyD,OAA/F,EADF,cAEE,iCAAI,SAAS,CAAC,cAAd,0BAFF,cAGE,oCAAO,SAAS,0CAAoCc,SAAS,GAAI,EAAb,EAAmB,yBAAvD,CAAhB,CAAoG,EAAE,CAAC,YAAvG,CAAoH,IAAI,CAAC,MAAzH,CAAgI,IAAI,CAAC,MAArI,CAA4I,QAAQ,KAApJ,CAAqJ,SAAS,CAAC,GAA/J,CAAmK,SAAS,CAAC,IAA7K,CAAkL,WAAW,CAAEtE,WAAW,CAACyC,IAA3M,CAAiN,KAAK,CAAEA,IAAxN,CAA8N,QAAQ,CAAEiC,UAAxO,EAHF,cAII,mCAAM,SAAS,sDAA8CJ,SAAS,GAAI,EAAb,EAAmB,sBAAjE,CAAf,UAA2GA,SAA3G,EAJJ,cAKE,oCAAO,SAAS,iDAA2CE,gBAAgB,GAAI,EAApB,EAA0B,yBAArE,CAAhB,CAAkH,EAAE,CAAC,mBAArH,CAAyI,IAAI,CAAC,MAA9I,CAAqJ,IAAI,CAAC,aAA1J,CAAwK,QAAQ,KAAhL,CAAiL,SAAS,CAAC,GAA3L,CAA+L,SAAS,CAAC,KAAzM,CAA+M,WAAW,CAAExE,WAAW,CAAC+C,KAAxO,CAA+O,KAAK,CAAEc,WAAtP,CAAmQ,QAAQ,CAAEiB,iBAA7Q,EALF,cAMI,mCAAM,SAAS,6DAAqDN,gBAAgB,GAAI,EAApB,EAA0B,sBAA/E,CAAf,UAAyHA,gBAAzH,EANJ,cAOE,qCAAQ,SAAS,oDAA8CP,WAAW,EAAI,wBAA7D,CAAjB,CAA0G,QAAQ,CAAEA,WAApH,CAAiI,IAAI,CAAC,QAAtI,oBAAmJP,OAAO,CAAG,YAAH,CAAgB,MAA1K,GAPF,GADF,EADA,EADF,CAeD,CAEcD,gFAAf,E;;ACjFA,QAASyB,gBAAT,CAAyBnF,KAAzB,CAA+B,CAC7B;AAD6B,oBAECH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFD,8EAEtBsD,OAFsB,qBAEbC,UAFa,qBAG7B;AAH6B,qBAIL/D,eAAK,CAACQ,QAAN,CAAe,EAAf,CAJK,+EAItBoC,IAJsB,qBAIhB2C,OAJgB,qBAM7B;AACAvF,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClBuE,OAAO,CAAC,EAAD,CAAP,CACApB,cAAc,CAAC,IAAD,CAAd,CACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CAJD,CAIE,CAAC5D,KAAK,CAACsD,MAAP,CAJF,EAMA,QAASW,aAAT,CAAsBV,CAAtB,CAAyB,CACvB,GAAG,CAACW,WAAJ,CAAgB,CACdX,CAAC,CAACY,cAAF,GACAnE,KAAK,CAACqF,cAAN,CAAqB5C,IAArB,EACA;AACAmB,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IACE,GAAMS,QAAO,CAAGxE,eAAK,CAACyE,MAAN,EAAhB,CA/B6B,qBAgCKzE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAhCL,+EAgCtBiF,SAhCsB,qBAgCXC,YAhCW,0CAiCS1F,eAAK,CAACQ,QAAN,CAAe,IAAf,CAjCT,+EAiCtB6D,WAjCsB,qBAiCTF,cAjCS,qBAmC7B,QAASwB,aAAT,CAAsBjC,CAAtB,CAAyB,CACrB;AACA6B,OAAO,CAAC7B,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAP,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BW,YAA/B,EACH,CAEC,QAASP,aAAT,EAAuB,CACrBhF,KAAK,CAACiF,aAAN,CAAoBZ,OAAO,CAACa,OAA5B,CAAoC,eAApC,EAAsDlB,cAAc,CAAC,IAAD,CAApE,CAA6EA,cAAc,CAAC,KAAD,CAA3F,CACD,CAEH,mBACE,sCAAS,SAAS,wCAAkChE,KAAK,CAACsD,MAAN,EAAiB,oBAAnD,CAAlB,CAA6F,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,wBAAvB,EAAiD,CAA7J,uBACA,kCAAK,SAAS,CAAC,kBAAf,uBACE,oCAAM,SAAS,2CAAf,CAA6D,QAAQ,CAAEU,YAAvE,CAAqF,QAAQ,CAAEe,YAA/F,CAA6G,GAAG,CAAEX,OAAlH,wBACE,qCAAQ,SAAS,6CAAjB,CAAiE,IAAI,CAAC,QAAtE,CAA+E,OAAO,CAAErE,KAAK,CAACyD,OAA9F,EADF,cAEE,iCAAI,SAAS,CAAC,cAAd,oCAFF,cAGE,oCAAO,SAAS,4CAAsC6B,SAAS,GAAI,EAAb,EAAmB,yBAAzD,CAAhB,CAAsG,EAAE,CAAC,cAAzG,CAAwH,IAAI,CAAC,KAA7H,CAAmI,IAAI,CAAC,QAAxI,CAAkJ,KAAK,CAAE7C,IAAzJ,CAA+J,WAAW,CAAC,WAA3K,CAAuL,QAAQ,KAA/L,CAAgM,QAAQ,CAAE+C,YAA1M,EAHF,cAIA,mCAAM,SAAS,8BAAwBF,SAAS,GAAI,EAAb,EAAmB,sBAA3C,CAAf,CAAoF,EAAE,CAAC,oBAAvF,UAA6GA,SAA7G,EAJA,cAKE,qCAAQ,SAAS,mDAA6CpB,WAAW,EAAI,wBAA5D,CAAjB,CAAyG,IAAI,CAAC,QAA9G,CAAuH,QAAQ,CAAEA,WAAjI,oBAAkJP,OAAO,CAAG,YAAH,CAAgB,MAAzK,GALF,GADF,EADA,EADF,CAaD,CAEcwB,8EAAf,E;;AC7DA,QAASM,cAAT,CAAuBzF,KAAvB,CAA6B,CAC3B;AAD2B,oBAEGH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFH,8EAEpBsD,OAFoB,qBAEXC,UAFW,qBAI3B;AAJ2B,qBAKH/D,eAAK,CAACQ,QAAN,CAAe,EAAf,CALG,+EAKpBqC,IALoB,qBAKdmB,OALc,0CAMHhE,eAAK,CAACQ,QAAN,CAAe,EAAf,CANG,+EAMpBoC,IANoB,qBAMd2C,OANc,qBAQ3B,QAASnB,aAAT,CAAsBV,CAAtB,CAAyB,CACvB,GAAG,CAACW,WAAJ,CAAgB,CACdX,CAAC,CAACY,cAAF,GACA;AACAnE,KAAK,CAACiD,UAAN,CAAiBP,IAAjB,CAAuBD,IAAvB,EACA;AACAmB,UAAU,CAAC,IAAD,CAAV,CACD,CACF,CAED/D,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClBgD,OAAO,CAAC,EAAD,CAAP,CACAuB,OAAO,CAAC,EAAD,CAAP,CACApB,cAAc,CAAC,IAAD,CAAd,CACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CALD,CAKE,CAAC5D,KAAK,CAACsD,MAAP,CALF,EAOA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IACE,GAAMe,QAAO,CAAGxE,eAAK,CAACyE,MAAN,EAAhB,CAlC2B,qBAmCOzE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAnCP,+EAmCpBkE,SAnCoB,qBAmCTC,YAnCS,0CAoCO3E,eAAK,CAACQ,QAAN,CAAe,EAAf,CApCP,gFAoCpBiF,SApCoB,sBAoCTC,YApCS,4CAqCW1F,eAAK,CAACQ,QAAN,CAAe,IAAf,CArCX,iFAqCpB6D,WArCoB,sBAqCPF,cArCO,sBAuC3B,QAASW,WAAT,CAAoBpB,CAApB,CAAuB,CACrB;AACAM,OAAO,CAACN,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAP,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BJ,YAA/B,EACD,CAED,QAASkB,WAAT,CAAoBnC,CAApB,CAAuB,CACrB;AACA6B,OAAO,CAAC7B,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAP,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BW,YAA/B,EACD,CAEC,QAASP,aAAT,EAAuB,CACrBhF,KAAK,CAACiF,aAAN,CAAoBZ,OAAO,CAACa,OAA5B,CAAoC,eAApC,EAAsDlB,cAAc,CAAC,IAAD,CAApE,CAA6EA,cAAc,CAAC,KAAD,CAA3F,CACD,CAEH,mBACE,sCAAS,SAAS,qCAA+BhE,KAAK,CAACsD,MAAN,EAAiB,oBAAhD,CAAlB,CAA0F,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,qBAAvB,EAA8C,CAAvJ,uBACA,kCAAK,SAAS,CAAC,kBAAf,uBACE,oCAAM,SAAS,wCAAf,CAA0D,QAAQ,CAAEU,YAApE,CAAkF,QAAQ,CAAEe,YAA5F,CAA0G,GAAG,CAAEX,OAA/G,wBACE,qCAAQ,SAAS,0CAAjB,CAA8D,IAAI,CAAC,QAAnE,CAA4E,OAAO,CAAErE,KAAK,CAACyD,OAA3F,EADF,cAEE,iCAAI,SAAS,CAAC,cAAd,uBAFF,cAGE,oCAAO,SAAS,+CAAyCc,SAAS,GAAI,EAAb,EAAmB,yBAA5D,CAAhB,CAAyG,EAAE,CAAC,iBAA5G,CAA8H,IAAI,CAAC,MAAnI,CAA0I,IAAI,CAAC,MAA/I,CAAsJ,WAAW,CAAC,OAAlK,CAA0K,QAAQ,KAAlL,CAAmL,SAAS,CAAC,GAA7L,CAAiM,SAAS,CAAC,IAA3M,CAAgN,KAAK,CAAE7B,IAAvN,CAA6N,QAAQ,CAAEiC,UAAvO,EAHF,cAIA,mCAAM,SAAS,2DAAmDJ,SAAS,GAAI,EAAb,EAAmB,sBAAtE,CAAf,UAAgHA,SAAhH,EAJA,cAMA,oCAAO,SAAS,8CAAwCe,SAAS,GAAI,EAAb,EAAmB,yBAA3D,CAAhB,CAAwG,EAAE,CAAC,WAA3G,CAAuH,IAAI,CAAC,KAA5H,CAAkI,IAAI,CAAC,MAAvI,CAA8I,WAAW,CAAC,WAA1J,CAAsK,QAAQ,KAA9K,CAA+K,KAAK,CAAE7C,IAAtL,CAA4L,QAAQ,CAAEiD,UAAtM,EANA,cAOA,mCAAM,SAAS,8BAAwBJ,SAAS,GAAI,EAAb,EAAmB,sBAA3C,CAAf,CAAoF,EAAE,CAAC,iBAAvF,UAA0GA,SAA1G,EAPA,cAQJ,qCAAQ,SAAS,gDAA0CpB,WAAW,EAAI,wBAAzD,CAAjB,CAAsG,QAAQ,CAAEA,WAAhH,CAA6H,IAAI,CAAC,QAAlI,oBAA+IP,OAAO,CAAG,YAAH,CAAgB,QAAtK,GARI,GADF,EADA,EADF,CAgBD,CAEc8B,0EAAf,E;;AC3EA,QAASE,YAAT,CAAqB3F,KAArB,CAA2B,CACzB;AADyB,oBAEKH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFL,8EAElBsD,OAFkB,qBAETC,UAFS,qBAIzB;AACA/D,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClB+C,UAAU,CAAC,KAAD,CAAV,CACD,CAFD,CAEE,CAAC5D,KAAK,CAACsD,MAAP,CAFF,EAIA,QAASW,aAAT,CAAsBV,CAAtB,CAAwB,CACtBA,CAAC,CAACY,cAAF,GACAnE,KAAK,CAAC4F,QAAN,CAAe5F,KAAK,CAAC4B,IAAN,CAAWM,GAA1B,EAEA;AACA0B,UAAU,CAAC,IAAD,CAAV,CACD,CAGD,mBACE,sCAAS,SAAS,mCAA6B5D,KAAK,CAACsD,MAAN,EAAgB,oBAA7C,CAAlB,CAAuF,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,mBAAvB,EAA4C,CAAlJ,uBACE,kCAAK,SAAS,CAAC,kBAAf,uBACE,oCAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEU,YAAxC,wBACE,qCAAQ,SAAS,CAAC,yCAAlB,EADF,cAEE,iCAAI,SAAS,CAAC,iDAAd,2BAFF,cAGE,qCAAQ,SAAS,CAAC,oCAAlB,CAAuD,IAAI,CAAC,QAA5D,oBAAyEN,OAAO,CAAG,YAAH,CAAgB,QAAhG,GAHF,GADF,EADF,EADF,CAWD,CAEcgC,sEAAf,E;;AC9BA,QAASE,MAAT,CAAe7F,KAAf,CAAqB,CACnB;AADmB,oBAEWH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFX,8EAEZsD,OAFY,qBAEHC,UAFG,qBAGnB;AAHmB,qBAIO/D,eAAK,CAACQ,QAAN,CAAe,EAAf,CAJP,+EAIZY,KAJY,qBAIL6E,QAJK,0CAKajG,eAAK,CAACQ,QAAN,CAAe,EAAf,CALb,+EAKZ0F,QALY,qBAKFC,WALE,qBAOnB;AACAnG,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClBmD,cAAc,CAAC,IAAD,CAAd,CACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CAHD,CAGE,EAHF,EAKA,QAASK,aAAT,CAAsBV,CAAtB,CAAyB,CACvBA,CAAC,CAACY,cAAF,GACA,GAAG,CAACD,WAAJ,CAAgB,CACd;AACA;AACAN,UAAU,CAAC,IAAD,CAAV,CACA5D,KAAK,CAACiG,SAAN,CAAgBhF,KAAhB,CAAuB8E,QAAvB,EACA;AACAnC,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IACE,GAAMS,QAAO,CAAGxE,eAAK,CAACyE,MAAN,EAAhB,CAlCmB,qBAmCiBzE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAnCjB,+EAmCZ6F,UAnCY,qBAmCAC,aAnCA,0CAoCuBtG,eAAK,CAACQ,QAAN,CAAe,EAAf,CApCvB,gFAoCZ+F,aApCY,sBAoCGC,gBApCH,4CAqCmBxG,eAAK,CAACQ,QAAN,CAAe,IAAf,CArCnB,iFAqCZ6D,WArCY,sBAqCCF,cArCD,sBAwCrB,QAASsC,YAAT,CAAqB/C,CAArB,CAAwB,CACtB;AACAuC,QAAQ,CAACvC,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAR,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BuB,aAA/B,EACD,CAED,QAASI,eAAT,CAAwBhD,CAAxB,CAA2B,CACzB;AACAyC,WAAW,CAACzC,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAX,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+ByB,gBAA/B,EACD,CAED,QAASrB,aAAT,EAAuB,CACrBhF,KAAK,CAACiF,aAAN,CAAoBZ,OAAO,CAACa,OAA5B,CAAoC,eAApC,EAAuDlB,cAAc,CAAC,IAAD,CAArE,CAA8EA,cAAc,CAAC,KAAD,CAA5F,CACD,CAEC,mBACE,sCAAS,SAAS,CAAC,OAAnB,uBACA,mCAAK,SAAS,CAAC,kBAAf,wBACE,oCAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEC,YAAxC,CAAsD,QAAQ,CAAEe,YAAhE,CAA8E,GAAG,CAAEX,OAAnF,wBACA,iCAAI,SAAS,CAAC,cAAd,oBADA,cAEE,oCAAO,SAAS,wBAAkB6B,UAAU,GAAI,EAAd,EAAoB,yBAAtC,CAAhB,CAAmF,EAAE,CAAC,aAAtF,CAAoG,IAAI,CAAC,OAAzG,CAAiH,IAAI,CAAC,OAAtH,CAA8H,SAAS,CAAC,GAAxI,CAA4I,SAAS,CAAC,IAAtJ,CAA2J,QAAQ,KAAnK,CAAoK,WAAW,CAAC,OAAhL,CAAwL,KAAK,CAAEjF,KAA/L,CAAsM,QAAQ,CAAEqF,WAAhN,EAFF,cAGI,mCAAM,SAAS,+BAAyBJ,UAAU,GAAI,EAAd,EAAoB,sBAA7C,CAAf,UAAuFA,UAAvF,EAHJ,cAIE,oCAAO,SAAS,wBAAkBE,aAAa,GAAI,EAAjB,EAAuB,yBAAzC,CAAhB,CAAsF,EAAE,CAAC,gBAAzF,CAA0G,IAAI,CAAC,UAA/G,CAA0H,IAAI,CAAC,UAA/H,CAA0I,SAAS,CAAC,GAApJ,CAAwJ,SAAS,CAAC,IAAlK,CAAuK,QAAQ,KAA/K,CAAgL,WAAW,CAAC,UAA5L,CAAuM,KAAK,CAAEL,QAA9M,CAAwN,QAAQ,CAAEQ,cAAlO,EAJF,cAKI,mCAAM,SAAS,8BAAwBH,aAAa,GAAI,EAAjB,EAAuB,sBAA/C,CAAf,UAAyFA,aAAzF,EALJ,cAME,sCAAQ,SAAS,yBAAmBlC,WAAW,EAAI,wBAAlC,CAAjB,CAA+E,QAAQ,CAAEA,WAAzF,CAAsG,IAAI,CAAC,QAA3G,qBAAwHP,OAAO,CAAG,YAAH,CAAgB,QAA/I,QANF,GADF,cASE,iCAAG,SAAS,CAAC,gBAAb,qDAAwD,2BAAC,gCAAD,EAAM,EAAE,CAAC,UAAT,CAAoB,SAAS,CAAC,aAA9B,kBAAxD,OATF,GADA,EADF,CAeD,CAEczC,+FAAU,CAAC2E,KAAD,CAAzB,E;;AC3EA,QAASW,OAAT,CAAgBxG,KAAhB,CAAsB,CAClB;AADkB,oBAEUH,eAAK,CAACQ,QAAN,CAAe,KAAf,CAFV,8EAEbsD,OAFa,qBAEJC,UAFI,qBAGlB;AAHkB,qBAIM/D,eAAK,CAACQ,QAAN,CAAe,EAAf,CAJN,+EAIbY,KAJa,qBAIN6E,QAJM,0CAKYjG,eAAK,CAACQ,QAAN,CAAe,EAAf,CALZ,+EAKb0F,QALa,qBAKHC,WALG,qBAOpB;AACAnG,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClBmD,cAAc,CAAC,IAAD,CAAd,CACAJ,UAAU,CAAC,KAAD,CAAV,CACD,CAHD,CAGE,EAHF,EAKA,QAASK,aAAT,CAAsBV,CAAtB,CAAyB,CACvB;AACAA,CAAC,CAACY,cAAF,GACA,GAAG,CAACD,WAAJ,CAAgB,CACd;AACAN,UAAU,CAAC,IAAD,CAAV,CACA5D,KAAK,CAACyG,YAAN,CAAmBxF,KAAnB,CAA0B8E,QAA1B,EACAnC,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IACE,GAAMS,QAAO,CAAGxE,eAAK,CAACyE,MAAN,EAAhB,CAjCoB,qBAkCgBzE,eAAK,CAACQ,QAAN,CAAe,EAAf,CAlChB,+EAkCb6F,UAlCa,qBAkCDC,aAlCC,0CAmCsBtG,eAAK,CAACQ,QAAN,CAAe,EAAf,CAnCtB,gFAmCb+F,aAnCa,sBAmCEC,gBAnCF,4CAoCkBxG,eAAK,CAACQ,QAAN,CAAe,IAAf,CApClB,iFAoCb6D,WApCa,sBAoCAF,cApCA,sBAsCtB,QAASsC,YAAT,CAAqB/C,CAArB,CAAwB,CACtB;AACAuC,QAAQ,CAACvC,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAR,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+BuB,aAA/B,EACD,CAED,QAASI,eAAT,CAAwBhD,CAAxB,CAA2B,CACzB;AACAyC,WAAW,CAACzC,CAAC,CAACqB,MAAF,CAASC,KAAV,CAAX,CACA;AACA7E,KAAK,CAAC8E,cAAN,CAAqBvB,CAAC,CAACqB,MAAvB,CAA+ByB,gBAA/B,EACD,CAED,QAASrB,aAAT,EAAuB,CACrBhF,KAAK,CAACiF,aAAN,CAAoBZ,OAAO,CAACa,OAA5B,CAAoC,eAApC,EAAuDlB,cAAc,CAAC,IAAD,CAArE,CAA8EA,cAAc,CAAC,KAAD,CAA5F,CACD,CAEC,mBACE,sCAAS,SAAS,CAAC,OAAnB,uBACA,mCAAK,SAAS,CAAC,kBAAf,wBACE,oCAAM,SAAS,CAAC,aAAhB,CAA8B,QAAQ,CAAEC,YAAxC,CAAsD,QAAQ,CAAEe,YAAhE,CAA8E,GAAG,CAAEX,OAAnF,wBACA,iCAAI,SAAS,CAAC,cAAd,qBADA,cAEE,oCAAO,SAAS,wBAAkB6B,UAAU,GAAI,EAAd,EAAoB,yBAAtC,CAAhB,CAAmF,EAAE,CAAC,aAAtF,CAAoG,IAAI,CAAC,OAAzG,CAAiH,IAAI,CAAC,OAAtH,CAA8H,SAAS,CAAC,GAAxI,CAA4I,SAAS,CAAC,IAAtJ,CAA2J,QAAQ,KAAnK,CAAoK,WAAW,CAAC,OAAhL,CAAwL,KAAK,CAAEjF,KAA/L,CAAsM,QAAQ,CAAEqF,WAAhN,EAFF,cAGI,mCAAM,SAAS,+BAAyBJ,UAAU,GAAI,EAAd,EAAoB,sBAA7C,CAAf,UAAuFA,UAAvF,EAHJ,cAIE,oCAAO,SAAS,wBAAkBE,aAAa,GAAI,EAAjB,EAAuB,yBAAzC,CAAhB,CAAsF,EAAE,CAAC,gBAAzF,CAA0G,IAAI,CAAC,UAA/G,CAA0H,IAAI,CAAC,UAA/H,CAA0I,SAAS,CAAC,GAApJ,CAAwJ,SAAS,CAAC,IAAlK,CAAuK,QAAQ,KAA/K,CAAgL,WAAW,CAAC,UAA5L,CAAuM,KAAK,CAAEL,QAA9M,CAAwN,QAAQ,CAAEQ,cAAlO,EAJF,cAKI,mCAAM,SAAS,8BAAwBH,aAAa,GAAI,EAAjB,EAAuB,sBAA/C,CAAf,UAAyFA,aAAzF,EALJ,cAME,qCAAQ,SAAS,yBAAmBlC,WAAW,EAAI,wBAAlC,CAAjB,CAA+E,QAAQ,CAAEA,WAAzF,CAAsG,IAAI,CAAC,QAA3G,oBAAwHP,OAAO,CAAG,YAAH,CAAgB,SAA/I,GANF,GADF,cASE,iCAAG,SAAS,CAAC,gBAAb,oDAAuD,2BAAC,gCAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,aAA7B,kBAAvD,OATF,GADA,EADF,CAeD,CAEczC,gGAAU,CAACsF,MAAD,CAAzB,E;;;;;;;;AC5EA,c,CACA;AACA;AACA;AACA,aACO,GAAME,eAAO,CAAE,uBAAf,C;;GCHDC,U,oLACK1F,K,CAAO8E,Q,CAAS,CACvB,MAAOa,MAAK,WAAIC,cAAJ,YAAuB,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CAFwB,CAMjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,QAAUjG,KAAX,CAAkB,WAAa8E,QAA/B,CAAf,CAN2B,CAAvB,CAAL,CAQNoB,IARM,CAQD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAbM,CAAP,CAcD,C,oCAEKxG,K,CAAO8E,Q,CAAS,CACpB,MAAOa,MAAK,WAAIC,cAAJ,YAAuB,CACjCC,MAAM,CAAE,MADyB,CAEjCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFwB,CAKjCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,QAAUjG,KAAX,CAAkB,WAAa8E,QAA/B,CAAf,CAL2B,CAAvB,CAAL,CAONoB,IAPM,CAOD,SAACO,QAAD,QAAcA,SAAQ,CAACJ,IAAT,EAAd,EAPC,EAQNH,IARM,CAQD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACO,KAAP,CAAa,CACXC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BT,GAAG,CAACO,KAAlC,EACA,MAAOP,IAAP,CACD,CACF,CAbM,CAAP,CAcD,C,6CAEU,CACT,MAAOR,MAAK,WAAIC,cAAJ,cAAyB,CACnCC,MAAM,CAAE,KAD2B,CAEnCC,OAAO,CAAE,CACP,eAAgB,kBADT,CAEP,0BAAoBa,YAAY,CAACE,OAAb,CAAqB,OAArB,CAApB,CAFO,CAF0B,CAAzB,CAAL,CAONX,IAPM,CAOD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAZM,CAAP,CAaD,C,oBAII,GAAMM,KAAI,CAAG,GAAIpB,UAAJ,EAAb,C;;;;;;;;ACpDP,GAAMqB,8BAAc,CAAG,QAAjBA,eAAiB,MAAyC,IAA3BC,UAA2B,MAAtCC,SAAsC,CAAblI,KAAa,wEAC9D,mBACE,2BAAC,6BAAD,WAEI,0BAAMA,MAAK,CAACe,QAAN,cAAiB,2BAAC,SAAD,6CAAef,KAAf,EAAjB,cAA4C,2BAAC,gCAAD,EAAU,EAAE,CAAC,QAAb,EAAlD,EAFJ,EADF,CAMA,CAPF,CASegI,2FAAf,E;;ACVA,QAASG,YAAT,CAAqBnI,KAArB,CAA2B,CAEzB,mBACE,sCAAS,SAAS,oCAA8BA,KAAK,CAACsD,MAAN,EAAgB,oBAA9C,CAAlB,CAAwF,OAAO,CAAE,iBAACC,CAAD,CAAK,CAACvD,KAAK,CAACwD,cAAN,CAAqBD,CAArB,CAAuB,oBAAvB,EAA6C,CAApJ,uBACE,kCAAK,SAAS,CAAC,kBAAf,uBACE,mCAAK,SAAS,CAAC,aAAf,wBACA,qCAAQ,SAAS,CAAC,wCAAlB,CAA2D,IAAI,CAAC,QAAhE,CAAyE,OAAO,CAAEvD,KAAK,CAACyD,OAAxF,EADA,cAEA,kCAAK,SAAS,WAAKzD,KAAK,CAACoI,OAAN,CAAgB,0BAAhB,CAA6C,0BAAlD,CAAd,EAFA,cAGA,iCAAI,SAAS,CAAC,iDAAd,UAAiEpI,KAAK,CAACoI,OAAN,wFAAjE,EAHA,GADF,EADF,EADF,CAWD,CAEcD,sEAAf,E;;ACjBA;GAEME,Q,yBACJ,kBAAsB,IAAT3B,QAAS,MAATA,OAAS,qDACpB,KAAKA,OAAL,CAAeA,OAAf,CACD,C,oFAEQiB,K,CAAM,CACb,KAAKA,KAAL,CAAaA,KAAb,CACD,CAED,mB,yCACS,CACP,MAAOf,MAAK,WAAI,KAAKF,OAAT,cAA4B,CACtCK,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAD6B,CAA5B,CAAL,CAKNR,IALM,CAKD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAVM,CAAP,CAWD,C,2CAES,CACR,MAAOb,MAAK,WAAI,KAAKF,OAAT,WAAyB,CACnCK,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAD0B,CAAzB,CAAL,CAKNR,IALM,CAKD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAVM,CAAP,CAWD,C,gDAEW/E,I,CAAMM,K,CAAM,CACtB,MAAO4D,MAAK,WAAI,KAAKF,OAAT,cAA4B,CACtCI,MAAM,CAAE,OAD8B,CAEtCC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAF6B,CAMpCX,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBxE,IAAI,CAAEA,IADa,CAEnBM,KAAK,CAAEA,KAFY,CAAf,CAN8B,CAA5B,CAAL,CAWNmE,IAXM,CAWD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAhBM,CAAP,CAiBD,C,8CAEUhF,I,CAAK,CACd,MAAOmE,MAAK,WAAI,KAAKF,OAAT,qBAAmC,CAC7CI,MAAM,CAAE,OADqC,CAE7CC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAFoC,CAM3CX,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBrE,MAAM,CAAEJ,IADW,CAAf,CANqC,CAAnC,CAAL,CAUN0E,IAVM,CAUD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,6BAAoCJ,GAAG,CAACK,UAAxC,EAAP,CACD,CAfM,CAAP,CAgBD,C,wCAEO/E,I,CAAMD,I,CAAK,CACjB,MAAOmE,MAAK,WAAI,KAAKF,OAAT,WAAyB,CACnCI,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAF0B,CAMjCX,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBxE,IAAI,CAAEA,IADa,CAEnBD,IAAI,CAAEA,IAFa,CAAf,CAN2B,CAAzB,CAAL,CAWN0E,IAXM,CAWD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAhBM,CAAP,CAiBD,C,8CAEUc,M,CAAO,CAChB,MAAO3B,MAAK,WAAI,KAAKF,OAAT,mBAA0B6B,MAA1B,EAAmC,CAC7CzB,MAAM,CAAE,QADqC,CAE7CC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAFoC,CAAnC,CAAL,CAONR,IAPM,CAOD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,kBAAyBJ,GAAG,CAACK,UAA7B,EAAP,CACD,CAZM,CAAP,CAaD,C,kEAEoBc,M,CAAQC,K,CAAM,CACjC,MAAOA,MAAK,CAAG,KAAKC,UAAL,CAAgBF,MAAhB,CAAH,CAA6B,KAAKG,OAAL,CAAaH,MAAb,CAAzC,CACD,C,wCAEOA,M,CAAO,CACb,MAAO3B,MAAK,WAAI,KAAKF,OAAT,mBAA0B6B,MAA1B,WAAyC,CACnDzB,MAAM,CAAE,KAD2C,CAEnDC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAF0C,CAAzC,CAAL,CAONR,IAPM,CAOD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,4BAAmCJ,GAAG,CAACK,UAAvC,EAAP,CACD,CAZM,CAAP,CAcD,C,8CAEUc,M,CAAO,CAChB,MAAO3B,MAAK,WAAI,KAAKF,OAAT,mBAA0B6B,MAA1B,WAAyC,CACnDzB,MAAM,CAAE,QAD2C,CAEnDC,OAAO,CAAE,CACPuB,aAAa,CAAE,KAAKX,KADb,CAEP,eAAgB,kBAFT,CAF0C,CAAzC,CAAL,CAONR,IAPM,CAOD,SAACC,GAAD,CAAS,CACb,GAAGA,GAAG,CAACC,EAAP,CAAU,CACR,MAAOD,IAAG,CAACE,IAAJ,EAAP,CACD,CACD,MAAOC,QAAO,CAACC,MAAR,4BAAmCJ,GAAG,CAACK,UAAvC,EAAP,CACD,CAZM,CAAP,CAaD,C,mBAGH,GAAMkB,IAAG,CAAG,GAAIN,QAAJ,CAAQ,CAClB3B,OAAO,CAAGA,cADQ,CAAR,CAAZ,C;;GCzJMkC,4B,4LACJ;6BACcC,I,CAAMC,Q,CAAS,CAC3B,GAAMC,UAAS,CAAGC,KAAK,CAACC,IAAN,CAAWJ,IAAI,CAACK,gBAAL,CAAsBJ,QAAtB,CAAX,CAAlB,CACA,MAAOC,UAAS,CAAC1G,IAAV,CAAe,SAAC8G,YAAD,CAAkB,CACtC,MAAO,CAACA,YAAY,CAACC,QAAb,CAAsBC,KAA9B,CACD,CAFM,EAEF,IAFE,CAEK,KAFZ,CAGD,CAED;sDACeC,K,CAAOC,a,CAAc,CAClC,CAACD,KAAK,CAACF,QAAN,CAAeC,KAAhB,CAAwBE,aAAa,CAACD,KAAK,CAACE,iBAAP,CAArC,CAAiED,aAAa,CAAC,EAAD,CAA9E,CACD,C,6BAGI,GAAMtE,cAAa,CAAG,GAAI2D,4BAAJ,EAAtB,C;;ACZP;AAUA;AAOA;AAEA;AAIA,QAASa,IAAT,EAAe,CACb;AACA,GAAMC,QAAO,CAAGC,0CAAU,EAA1B,CAEA;AAJa,oBAK2B9J,eAAK,CAACQ,QAAN,CAAe,CAACoC,IAAI,CAAC,GAAN,CAAf,CAL3B,8EAKNmH,YALM,qBAKQC,eALR,0CAMyBhK,eAAK,CAACQ,QAAN,CAAe,EAAf,CANzB,+EAMNJ,WANM,qBAMO6J,cANP,0CAOajK,eAAK,CAACQ,QAAN,CAAe,EAAf,CAPb,+EAON6C,KAPM,qBAOC6G,QAPD,0CAQiBlK,eAAK,CAACQ,QAAN,CAAe,IAAf,CARjB,+EAQNsD,OARM,qBAQGC,UARH,0CASmB/D,eAAK,CAACQ,QAAN,CAAe,KAAf,CATnB,gFASNU,QATM,sBASIiJ,WATJ,sBAWb;AAXa,sBAY+CnK,eAAK,CAACQ,QAAN,CAAe,KAAf,CAZ/C,iFAYN4J,sBAZM,sBAYkBC,yBAZlB,4CAayCrK,eAAK,CAACQ,QAAN,CAAe,KAAf,CAbzC,iFAaN8J,mBAbM,sBAaeC,sBAbf,4CAc6CvK,eAAK,CAACQ,QAAN,CAAe,KAAf,CAd7C,iFAcNgK,qBAdM,sBAciBC,wBAdjB,4CAeqCzK,eAAK,CAACQ,QAAN,CAAe,KAAf,CAfrC,iFAeNkK,iBAfM,sBAeaC,oBAfb,4CAgBuB3K,eAAK,CAACQ,QAAN,CAAe,KAAf,CAhBvB,iFAgBNoK,UAhBM,sBAgBMC,aAhBN,4CAiB6B7K,eAAK,CAACQ,QAAN,CAAe,KAAf,CAjB7B,iFAiBNsK,aAjBM,sBAiBSC,gBAjBT,4CAkBqB/K,eAAK,CAACQ,QAAN,CAAe,KAAf,CAlBrB,iFAkBNwK,SAlBM,sBAkBKC,YAlBL,sBAoBb;AACA,QAASC,iBAAT,CAA0BrI,IAA1B,CAAgCM,KAAhC,CAAsC,CACpC2F,GAAG,CAACqC,WAAJ,CAAgBtI,IAAhB,CAAsBM,KAAtB,EACCmE,IADD,CACM,SAAC8D,IAAD,CAAQ,CACZnB,cAAc,CAACmB,IAAD,CAAd,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,KAAK,CAACH,GAAD,CAAL,CACD,CAPD,EAQCI,OARD,CAQS,UAAI,CAACC,cAAc,GAAG,CAR/B,EASD,CAED,QAASC,mBAAT,CAA4BhJ,IAA5B,CAAiC,CAC/BkG,GAAG,CAAC+C,UAAJ,CAAejJ,IAAf,EACC0E,IADD,CACM,SAAC8D,IAAD,CAAQ,CACZnB,cAAc,CAACmB,IAAD,CAAd,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,KAAK,CAACH,GAAD,CAAL,CACD,CAPD,EAQCI,OARD,CAQS,UAAI,CAACC,cAAc,GAAG,CAR/B,EASD,CACD;AACA,QAASG,kBAAT,CAA2B/J,IAA3B,CAAgC,CAC9BiI,eAAe,CAACjI,IAAD,CAAf,CACA4I,oBAAoB,CAAC,IAAD,CAApB,CACD,CAED,QAASoB,gBAAT,CAAyBhK,IAAzB,CAA8B,CAC5B8I,aAAa,CAAC,IAAD,CAAb,CACAb,eAAe,CAACjI,IAAD,CAAf,CACD,CAED,QAASiK,eAAT,CAAwBjK,IAAxB,CAA8B,CAC5B;AACA;AACA,GAAMR,QAAO,CAAGQ,IAAI,CAACQ,KAAL,CAAWC,IAAX,CAAgB,SAAAC,CAAC,QAAIA,EAAC,GAAKrC,WAAW,CAACiC,GAAtB,EAAjB,CAAhB,CAEA;AACAyG,GAAG,CAACmD,oBAAJ,CAAyBlK,IAAI,CAACM,GAA9B,CAAmCd,OAAnC,EAA4C+F,IAA5C,CAAiD,SAAC4E,OAAD,CAAa,CAC1D;AACF,GAAMC,SAAQ,CAAG9I,KAAK,CAACC,GAAN,CAAU,SAAC8I,CAAD,QAAOA,EAAC,CAAC/J,GAAF,GAAUN,IAAI,CAACM,GAAf,CAAqB6J,OAArB,CAA+BE,CAAtC,EAAV,CAAjB,CACA;AACAlC,QAAQ,CAACiC,QAAD,CAAR,CACD,CALD,EAMCd,KAND,CAMO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,KAAK,CAACH,GAAD,CAAL,CACD,CATD,EAUCI,OAVD,CAUS,UAAI,CAACC,cAAc,GAAG,CAV/B,EAWD,CAED,QAASU,iBAAT,CAA0B3D,MAA1B,CAAiC,CAC/B;AACAI,GAAG,CAACwD,UAAJ,CAAe5D,MAAf,EACCpB,IADD,CACM,UAAM,CACV,GAAM6E,SAAQ,CAAG9I,KAAK,CAACkJ,MAAN,CAAa,SAACH,CAAD,CAAK,CACjC,MAAOA,EAAC,CAAC/J,GAAF,GAAUqG,MAAjB,CACD,CAFgB,CAAjB,CAGAwB,QAAQ,CAACiC,QAAD,CAAR,CACD,CAND,EAOCd,KAPD,CAOO,SAACC,GAAD,CAAS,CACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,KAAK,CAACH,GAAD,CAAL,CACD,CAVH,EAWCI,OAXD,CAWS,UAAI,CAACC,cAAc,GAAG,CAX/B,EAYD,CAED;AACA,QAASa,uBAAT,EAAiC,CAC/BnC,yBAAyB,CAAC,IAAD,CAAzB,CACD,CAED,QAASoC,oBAAT,EAA8B,CAC5BlC,sBAAsB,CAAC,IAAD,CAAtB,CACD,CAED,QAASmC,sBAAT,EAAgC,CAC9BjC,wBAAwB,CAAC,IAAD,CAAxB,CACD,CAED,QAASkC,qBAAT,CAA8B9J,IAA9B,CAAoCD,IAApC,CAAyC,CACvCkG,GAAG,CAAC8D,OAAJ,CAAY/J,IAAZ,CAAiBD,IAAjB,EAAuB0E,IAAvB,CAA4B,SAAC4E,OAAD,CAAa,CACvChC,QAAQ,wDAAK7G,KAAL,GAAY6I,OAAZ,GAAR,CACD,CAFD,EAGCb,KAHD,CAGO,SAACC,GAAD,CAAS,CACZC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAG,KAAK,CAACH,GAAD,CAAL,CACD,CANH,EAOCI,OAPD,CAOS,UAAI,CAACC,cAAc,GAAG,CAP/B,EAQD,CAED;AACA,QAASkB,YAAT,CAAqBC,UAArB,CAAgC,CAC9B3C,WAAW,CAAC2C,UAAD,CAAX,CACA,GAAG,CAACA,UAAJ,CAAe,CACf;AACA7C,cAAc,CAAC,EAAD,CAAd,CACAlC,YAAY,CAACgF,UAAb,CAAwB,OAAxB,EACC,CACF,CAED,QAASC,yBAAT,CAAkCzE,OAAlC,CAA0C,CACxC0C,YAAY,CAAC1C,OAAD,CAAZ,CACAwC,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAED,QAASkC,mBAAT,CAA4B7L,KAA5B,CAAmC8E,QAAnC,CAA4C,CAC1CgC,IAAI,CAACgF,QAAL,CAAc9L,KAAd,CAAqB8E,QAArB,EACCoB,IADD,CACM,SAACC,GAAD,CAAS,CACb,GAAGA,GAAH,CAAO,CACLyF,wBAAwB,CAAC,IAAD,CAAxB,CACAnD,OAAO,CAACsD,IAAR,CAAa,QAAb,EACAC,eAAe,CAAChM,KAAD,CAAQ8E,QAAR,CAAf,CACD,CAJD,IAKI,CACF8G,wBAAwB,CAAC,KAAD,CAAxB,CACD,CACF,CAVD,EAWD,CAED,QAASI,gBAAT,CAAyBhM,KAAzB,CAAgC8E,QAAhC,CAAyC,CACvCgC,IAAI,CAACpH,KAAL,CAAWM,KAAX,CAAkB8E,QAAlB,EACCoB,IADD,CACM,SAACC,GAAD,CAAS,CACb,GAAGA,GAAH,CAAO,CACLsF,WAAW,CAAC,IAAD,CAAX,CACAhD,OAAO,CAACsD,IAAR,CAAa,GAAb,EACD,CAHD,IAII,CACFH,wBAAwB,CAAC,KAAD,CAAxB,CACD,CACF,CATD,EAUD,CAED;AACA,QAASrB,eAAT,EAAyB,CACvBtB,yBAAyB,CAAC,KAAD,CAAzB,CACAE,sBAAsB,CAAC,KAAD,CAAtB,CACAE,wBAAwB,CAAC,KAAD,CAAxB,CACAE,oBAAoB,CAAC,KAAD,CAApB,CACAE,aAAa,CAAC,KAAD,CAAb,CACAE,gBAAgB,CAAC,KAAD,CAAhB,CACAf,eAAe,CAAC,CAACpH,IAAI,CAAC,GAAN,CAAD,CAAf,CACD,CAED;AACA,QAASyK,uBAAT,CAAgC3J,CAAhC,CAAmCuF,QAAnC,CAA4C,CAC1C,GAAGvF,CAAC,CAACqB,MAAF,CAASuI,SAAT,CAAmBC,QAAnB,CAA4BtE,QAA5B,CAAH,CAAyC,CACvC0C,cAAc,GACf,CACF,CAED;AACA,GAAM6B,eAAc,CAAGxN,eAAK,CAACyN,WAAN,CAAkB,SAAC/J,CAAD,CAAO,CAC5C,GAAGA,CAAC,CAACgK,GAAF,GAAU,QAAb,CAAsB,CACpB/B,cAAc,GACf,CACF,CAJoB,CAIlB,EAJkB,CAAvB,CAMF;AACA3L,eAAK,CAACgB,SAAN,CAAgB,UAAM,CAClB2M,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmCJ,cAAnC,EACA,MAAO,WAAM,CACXG,MAAM,CAACE,mBAAP,CAA2B,SAA3B,CAAsCL,cAAtC,EACD,CAFD,CAGD,CALH,CAKK,CAACA,cAAD,CALL,EAOI;AACAxN,eAAK,CAACgB,SAAN,CAAgB,UAAI,CAClB;AACA,GAAI+G,YAAY,CAACE,OAAb,CAAqB,OAArB,CAAJ,CAAmC,CACjC,GAAMH,MAAK,CAAGC,YAAY,CAACE,OAAb,CAAqB,OAArB,CAAd,CACAa,GAAG,CAACgF,QAAJ,CAAahG,KAAb,EACAqC,WAAW,CAAC,IAAD,CAAX,CACArB,GAAG,CAACiF,OAAJ,GACCzG,IADD,CACM,SAAC8D,IAAD,CAAQ,CACZnB,cAAc,CAACmB,IAAD,CAAd,CACA;AACAtC,GAAG,CAACkF,QAAJ,GACC1G,IADD,CACM,SAAC8D,IAAD,CAAU,CACdlB,QAAQ,CAACkB,IAAD,CAAR,CACD,CAHD,EAICC,KAJD,CAIO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAND,EAOD,CAXD,EAYCD,KAZD,CAYO,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAdD,EAeD,CACD;AACAvH,UAAU,CAAC,KAAD,CAAV,CACD,CAxBD,CAwBE,CAAC3D,WAAD,CAAcc,QAAd,CAxBF,EA0BF,MACE;AACF4C,OAAO,cAAG,kCAAK,SAAS,CAAC,kBAAf,6BAAH,cAET,kCAAK,SAAS,CAAC,UAAf,uBACA,4BAAC,kBAAD,CAAoB,QAApB,EAA6B,KAAK,CAAE1D,WAApC,wBACE,2BAAC,iBAAD,EAAQ,QAAQ,CAAEc,QAAlB,CAA4B,KAAK,CAAE2L,WAAnC,EADF,cAEE,4BAAC,8BAAD,yBACA,2BAAC,6BAAD,EAAO,IAAI,CAAC,SAAZ,uBACE,2BAAC,iBAAD,EACE,aAAa,CAAEzH,aAAa,CAACA,aAD/B,CAEE,cAAc,CAAEA,aAAa,CAACH,cAFhC,CAGE,YAAY,CAAEgI,kBAHhB,EADF,EADA,cAQA,2BAAC,6BAAD,EAAO,IAAI,CAAC,QAAZ,UAEE,0BAAM,CAAC/L,QAAD,cACN,2BAAC,gBAAD,EACE,aAAa,CAAEkE,aAAa,CAACA,aAD/B,CAEE,cAAc,CAAEA,aAAa,CAACH,cAFhC,CAGE,SAAS,CAAEmI,eAHb,EADM,eAMN;AACA,2BAAC,gCAAD,EAAU,EAAE,CAAC,GAAb,EAPA,EAFF,EARA,cAoBA,2BAAC,yBAAD,EAAgB,IAAI,CAAC,GAArB,CACE,QAAQ,CAAElM,QADZ,CAEE,SAAS,CAAE4B,eAFb,CAGE,aAAa,CAAI0J,sBAHnB,CAIE,UAAU,CAAIC,mBAJhB,CAKE,YAAY,CAAIC,qBALlB,CAME,WAAW,CAAIX,eANjB,CAOE,IAAI,CAAIhC,YAPV,CAQE,KAAK,CAAI1G,KARX,CASE,UAAU,CAAI2I,cAThB,CAUE,YAAY,CAAIF,iBAVlB,EApBA,GAFF,cAoCE,2BAAC,iBAAD,IApCF,cAqCE,2BAAC,2BAAD,EACE,MAAM,CAAE1B,sBADV,CAEE,OAAO,CAAEuB,cAFX,CAGE,YAAY,CAAET,gBAHhB,CAIE,cAAc,CAAEmC,sBAJlB,CAKE,aAAa,CAAEjI,aAAa,CAACA,aAL/B,CAME,cAAc,CAAEA,aAAa,CAACH,cANhC,EArCF,cA8CE,2BAAC,wBAAD,EACE,MAAM,CAAEqF,mBADV,CAEE,OAAO,CAAEqB,cAFX,CAGE,UAAU,CAAEgB,oBAHd,CAIE,cAAc,CAAEU,sBAJlB,CAKE,aAAa,CAAEjI,aAAa,CAACA,aAL/B,CAME,cAAc,CAAEA,aAAa,CAACH,cANhC,EA9CF,cAuDE,2BAAC,0BAAD,EACE,MAAM,CAAEuF,qBADV,CAEE,OAAO,CAAEmB,cAFX,CAGE,cAAc,CAAEC,kBAHlB,CAIE,cAAc,CAAEyB,sBAJlB,CAKE,aAAa,CAAEjI,aAAa,CAACA,aAL/B,CAME,cAAc,CAAEA,aAAa,CAACH,cANhC,EAvDF,cAgEE,2BAAC,yBAAD,EACE,IAAI,CAAE8E,YADR,CAEE,MAAM,CAAEa,UAFV,CAGE,OAAO,CAAEe,cAHX,CAIE,cAAc,CAAE0B,sBAJlB,EAhEF,cAuEE,2BAAC,sBAAD,EACE,MAAM,CAAE3C,iBADV,CAEE,OAAO,CAAEiB,cAFX,CAGE,IAAI,CAAI5B,YAHV,CAIE,QAAQ,CAAIsC,gBAJd,CAKE,cAAc,CAAEgB,sBALlB,EAvEF,cA+EE,2BAAC,sBAAD,EACE,MAAM,CAAEvC,aADV,CAEE,OAAO,CAAEa,cAFX,CAGE,cAAc,CAAE0B,sBAHlB,CAIE,OAAO,CAAErC,SAJX,EA/EF,GADA,EAJE,EA4FA,CAEapB,sDAAf,E;;AChVA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA,GAAMqE,YAAW,CAAGC,OAAO,CACzBP,MAAM,CAACrN,QAAP,CAAgB6N,QAAhB,GAA6B,WAA7B,EACE;AACAR,MAAM,CAACrN,QAAP,CAAgB6N,QAAhB,GAA6B,OAF/B,EAGE;AACAR,MAAM,CAACrN,QAAP,CAAgB6N,QAAhB,CAAyBC,KAAzB,CACE,wDADF,CALuB,CAA3B,CAUO,QAASlB,uBAAT,CAAkBmB,MAAlB,CAA0B,CAC/B,GAAIC,KAAA,EAAyC,iBAAmBC,UAAhE,CAA2E,CACzE;AACA,GAAMC,UAAS,CAAG,GAAIC,IAAJ,CAAQH,EAAR,CAAgCX,MAAM,CAACrN,QAAP,CAAgBoO,IAAhD,CAAlB,CACA,GAAIF,SAAS,CAACG,MAAV,GAAqBhB,MAAM,CAACrN,QAAP,CAAgBqO,MAAzC,CAAiD,CAC/C;AACA;AACA;AACA,OACD,CAEDhB,MAAM,CAACC,gBAAP,CAAwB,MAAxB,CAAgC,UAAM,CACpC,GAAMgB,MAAK,WAAMN,EAAN,sBAAX,CAEA,GAAIL,WAAJ,CAAiB,CACf;AACAY,uBAAuB,CAACD,KAAD,CAAQP,MAAR,CAAvB,CAEA;AACA;AACAE,SAAS,CAACO,aAAV,CAAwBC,KAAxB,CAA8BzH,IAA9B,CAAmC,UAAM,CACvCiE,OAAO,CAACC,GAAR,CACE,yDACE,qDAFJ,EAID,CALD,EAMD,CAZD,IAYO,CACL;AACAwD,eAAe,CAACJ,KAAD,CAAQP,MAAR,CAAf,CACD,CACF,CAnBD,EAoBD,CACF,CAED,QAASW,gBAAT,CAAyBJ,KAAzB,CAAgCP,MAAhC,CAAwC,CACtCE,SAAS,CAACO,aAAV,CACG5B,QADH,CACY0B,KADZ,EAEGtH,IAFH,CAEQ,SAAA2H,YAAY,CAAI,CACpBA,YAAY,CAACC,aAAb,CAA6B,UAAM,CACjC,GAAMC,iBAAgB,CAAGF,YAAY,CAACG,UAAtC,CACA,GAAID,gBAAgB,EAAI,IAAxB,CAA8B,CAC5B,OACD,CACDA,gBAAgB,CAACE,aAAjB,CAAiC,UAAM,CACrC,GAAIF,gBAAgB,CAACG,KAAjB,GAA2B,WAA/B,CAA4C,CAC1C,GAAIf,SAAS,CAACO,aAAV,CAAwBS,UAA5B,CAAwC,CACtC;AACA;AACA;AACAhE,OAAO,CAACC,GAAR,CACE,sDACE,4DAFJ,EAKA;AACA,GAAI6C,MAAM,EAAIA,MAAM,CAACmB,QAArB,CAA+B,CAC7BnB,MAAM,CAACmB,QAAP,CAAgBP,YAAhB,EACD,CACF,CAbD,IAaO,CACL;AACA;AACA;AACA1D,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAEA;AACA,GAAI6C,MAAM,EAAIA,MAAM,CAACoB,SAArB,CAAgC,CAC9BpB,MAAM,CAACoB,SAAP,CAAiBR,YAAjB,EACD,CACF,CACF,CACF,CA3BD,CA4BD,CAjCD,CAkCD,CArCH,EAsCG5D,KAtCH,CAsCS,SAAAqE,KAAK,CAAI,CACdnE,OAAO,CAACmE,KAAR,CAAc,2CAAd,CAA2DA,KAA3D,EACD,CAxCH,EAyCD,CAED,QAASb,wBAAT,CAAiCD,KAAjC,CAAwCP,MAAxC,CAAgD,CAC9C;AACAtH,KAAK,CAAC6H,KAAD,CAAQ,CACX1H,OAAO,CAAE,CAAE,iBAAkB,QAApB,CADE,CAAR,CAAL,CAGGI,IAHH,CAGQ,SAAAO,QAAQ,CAAI,CAChB;AACA,GAAM8H,YAAW,CAAG9H,QAAQ,CAACX,OAAT,CAAiB0I,GAAjB,CAAqB,cAArB,CAApB,CACA,GACE/H,QAAQ,CAACgI,MAAT,GAAoB,GAApB,EACCF,WAAW,EAAI,IAAf,EAAuBA,WAAW,CAACG,OAAZ,CAAoB,YAApB,IAAsC,CAAC,CAFjE,CAGE,CACA;AACAvB,SAAS,CAACO,aAAV,CAAwBC,KAAxB,CAA8BzH,IAA9B,CAAmC,SAAA2H,YAAY,CAAI,CACjDA,YAAY,CAACc,UAAb,GAA0BzI,IAA1B,CAA+B,UAAM,CACnCqG,MAAM,CAACrN,QAAP,CAAgB0P,MAAhB,GACD,CAFD,EAGD,CAJD,EAKD,CAVD,IAUO,CACL;AACAhB,eAAe,CAACJ,KAAD,CAAQP,MAAR,CAAf,CACD,CACF,CApBH,EAqBGhD,KArBH,CAqBS,UAAM,CACXE,OAAO,CAACC,GAAR,CACE,+DADF,EAGD,CAzBH,EA0BD,CAEM,QAASuE,WAAT,EAAsB,CAC3B,GAAI,iBAAmBxB,UAAvB,CAAkC,CAChCA,SAAS,CAACO,aAAV,CAAwBC,KAAxB,CACGzH,IADH,CACQ,SAAA2H,YAAY,CAAI,CACpBA,YAAY,CAACc,UAAb,GACD,CAHH,EAIG1E,KAJH,CAIS,SAAAqE,KAAK,CAAI,CACdnE,OAAO,CAACmE,KAAR,CAAcA,KAAK,CAACO,OAApB,EACD,CANH,EAOD,CACF,C;;ACrIDC,mBAAQ,CAACC,MAAT,cACE,2BAAC,eAAD,CAAO,UAAP,wBACE,2BAAC,yCAAD,wBACE,2BAAC,cAAD,IADF,EADF,EADF,CAMEC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CANF,EASA;AACA;AACA;AACAvB,UAAA,G","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","export default __webpack_public_path__ + \"static/media/logo.6c4fd428.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { Link, withRouter, useLocation } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Header(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const location = useLocation();\r\n  const [currentLocation, setLocation] = React.useState('login');\r\n  const [showMenu, setShowMenu] = React.useState(false);\r\n\r\n  function logOutUser(){\r\n    props.login(false);\r\n    setShowMenu(false);\r\n  }\r\n\r\n  function handleShowMenu(){\r\n    setShowMenu(!showMenu);\r\n  }\r\n\r\n  //change the display depending on the current page. Default is signin page\r\n  //what to display is determined in the return statement\r\n  React.useEffect(() => {\r\n    if(location.pathname === '/signup') { \r\n      setLocation('signup');\r\n    }\r\n    else if(location.pathname === '/login'){\r\n      setLocation('login');\r\n    }\r\n  }, [location]);\r\n  \r\n  return (\r\n    <header className={`header ${!props.loggedIn && 'header_state_loggedOut'}`}>\r\n      <div className=\"header__logo-menu\">\r\n        <img className=\"header__logo\" src={logo} alt=\"logo\" />\r\n        {props.loggedIn && <button className={`header__menu-icon ${showMenu  && 'header__menu-icon_state_closed'}`} type=\"button\" onClick={handleShowMenu}></button>}\r\n      </div>\r\n      <nav className={`header__nav ${(!showMenu && props.loggedIn) && 'header__nav_state_closed'}`}>\r\n        {props.loggedIn ? \r\n        //logged in\r\n        <><p className=\"header__email\">{currentUser.email}</p>\r\n        <button className=\"header__link_type_logout\" type=\"button\" onClick={logOutUser}>Log out</button></> : \r\n        //logged out\r\n        currentLocation === 'login' ? \r\n          //login header\r\n          <Link to=\"./signup\" className=\"header__link\">Sign up</Link>: \r\n          //signup header\r\n          <Link to=\"./login\" className=\"header__link\">Log in</Link>}\r\n      </nav>\r\n    </header>\r\n  )}\r\n\r\nexport default withRouter(Header);","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Card(props){\r\n  \r\n  const [isLiked, setIsLiked] = React.useState(false);\r\n  const [isOwn, setIsOwn] = React.useState(false);\r\n  const [likesLength, setlikesLength] = React.useState(0);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  } \r\n\r\n  function handleLike() {\r\n    props.onCardLike(props.card);\r\n  } \r\n\r\n  function handleDelete() {\r\n    props.onCardDelete(props.card);\r\n  } \r\n\r\n  //control delete button visibility\r\n  React.useEffect(() => {\r\n    if(props.card.owner){\r\n      props.card.owner === currentUser._id ? setIsOwn(true) : setIsOwn(false);\r\n    }\r\n  },[props.card])\r\n  //const isOwn = props.card.owner._id === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = (\r\n    `element__delete-button ${isOwn && 'element__delete-button_visibility_visible'}`\r\n  ); \r\n\r\n  //check if card was already liked\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      props.card.likes.some(i => i === currentUser._id) ? setIsLiked(true) : setIsLiked(false);\r\n    }\r\n  },[props.card])\r\n  //const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `element__like-button ${isLiked && 'element__like-button_stateliked'}`; \r\n\r\n  //get number of likes\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      setlikesLength(props.card.likes.length);\r\n    }\r\n  },[props.card])\r\n\r\n  return(\r\n  <>\r\n  <div className={cardDeleteButtonClassName} onClick={handleDelete} ></div>\r\n  <img className=\"element__image\" src={props.card.link} onClick={handleClick} alt=\"place\"/>\r\n  <div className=\"element__text\">\r\n    <h2 className=\"element__title\">{props.card.name}</h2>\r\n    <div className=\"element__likes-container\">\r\n      <button className={cardLikeButtonClassName} onClick={handleLike}></button>\r\n      <p className=\"element__likes-display\">{likesLength}</p>\r\n    </div>\r\n  </div>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Card;","export default __webpack_public_path__ + \"static/media/profile-img.074e6423.png\";","import React from 'react';\r\nimport Card from './Card.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nimport defaultAvatar from '../images/profile-img.png';\r\n\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  \r\n  return (\r\n  <>\r\n  <section className=\"profile\">\r\n    <div className=\"profile__image-container\">\r\n      <div className=\"profile__image-overlay\" onClick={props.onEditAvatar}></div>\r\n      <img className=\"profile__image\" src={currentUser.avatar ? currentUser.avatar : defaultAvatar} alt=\"profile-img\"/>\r\n    </div>\r\n    <div className=\"profile__info\">\r\n  <h1 className=\"profile__name\">{currentUser.name ? currentUser.name : 'Jacques Cousteau' }</h1>\r\n      <button className=\"profile__edit-button\" onClick={props.onEditProfile} aria-label=\"edit profile\"></button>       \r\n  <p className=\"profile__description\">{currentUser.about ? currentUser.about : 'Explorer'}</p>     \r\n    </div>\r\n    <button className=\"profile__add-button\" onClick={props.onAddPlace}></button>\r\n  </section>\r\n\r\n  <section className=\"elements\">\r\n    {props.cards.length > 0 ?\r\n     props.cards.map(card => (\r\n      <div className=\"element\" key={card._id}>\r\n        <Card card={card} onCardClick = {props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete}/>\r\n      </div>\r\n    ))\r\n    \r\n    :\r\n    //show loading screen if cards haven't loaded\r\n    <div className=\"loading\">Add your first place with the + button!</div>\r\n    }\r\n  </section>\r\n  </>\r\n)}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n  <footer className=\"footer\">\r\n    <p className=\"footer__copyright\">© 2020 Around The U.S.</p>\r\n  </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithImage(props) {\r\n\r\n  return (\r\n    <section className={`popup popup_type_image ${props.isOpen && 'popup_state_opened'}`}  onClick={(e)=>{props.onOutsideClick(e,'popup popup_type_image')}}>\r\n    <div className=\"popup__container\">\r\n      <div className=\"popup__image-modal\">\r\n        <button className=\"popup__close popup__close_type_image\" type=\"button\" onClick={props.onClose}></button>  \r\n        <figure>\r\n          <img className=\"popup__image\" src={props.card && props.card.link} alt=\"place\"/>\r\n          <figcaption className=\"popup__image-caption\"></figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default PopupWithImage;","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  // Subscription to the context\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n    //form field\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n\r\n    //set default values\r\n    currentUser.name && setName(currentUser.name);\r\n    currentUser.about && setDescription(currentUser.about);\r\n  },[props.isOpen])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    if(!formInvalid){\r\n      e.preventDefault();   \r\n      // Pass the values of the managed components to the external handler\r\n      props.onUpdateUser(name, description);\r\n\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [descriptionError, setDescriptionError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleName(e) {\r\n  //set value\r\n  setName(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setNameError)\r\n}\r\n\r\nfunction handleDescription(e) {\r\n  //set value\r\n  setDescription(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setDescriptionError)\r\n}\r\n\r\n  function validateForm(){\r\n    props.formValidator(formRef.current,'.popup__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n  }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-profile ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-profile')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-profile`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-profile`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Edit Profile</h4>\r\n        <input className={`popup__input popup__input-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"name-input\" type=\"text\" name=\"name\" required minLength=\"2\" maxLength=\"40\" placeholder={currentUser.name} value={name} onChange={handleName}/>\r\n          <span className={`popup__input-error\" id=\"name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n        <input className={`popup__input popup__input-description ${descriptionError !=='' && 'popup__input_type_error'}`} id=\"description-input\" type=\"text\" name=\"description\" required minLength=\"2\" maxLength=\"200\" placeholder={currentUser.about} value={description} onChange={handleDescription}/>\r\n          <span className={`popup__input-error\" id=\"description-input-error ${descriptionError !=='' && 'popup__error_visible'}`}>{descriptionError}</span>\r\n        <button className={`popup__submit popup__edit-profile-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default EditProfilePopUp;","import React from 'react';\r\n\r\nfunction EditAvatarPopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  //form field\r\n  const [link, setLink] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setLink('');\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  function handleSubmit(e) {\r\n    if(!formInvalid){\r\n      e.preventDefault();\r\n      props.onUpdateAvatar(link);\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [linkError, setLinkError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n  function handleChange(e) {\r\n      //set value\r\n      setLink(e.target.value);\r\n      //set error\r\n      props.fieldValidator(e.target, setLinkError)\r\n  }\r\n  \r\n    function validateForm(){\r\n      props.formValidator(formRef.current,'.popup__input')? setFormInvalid(true) : setFormInvalid(false);\r\n    }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-avatar ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-avatar')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-avatar`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-avatar`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Change profile picture</h4>\r\n        <input className={`popup__input popup__input-avatar ${linkError !=='' && 'popup__input_type_error'}`} id=\"avatar-input\" type=\"url\" name=\"avatar\"  value={link} placeholder=\"Image URL\" required onChange={handleChange}/>\r\n      <span className={`popup__input-error ${linkError !=='' && 'popup__error_visible'}`} id=\"avatar-input-error\">{linkError}</span>\r\n        <button className={`popup__submit popup__edit-avatar-submit ${formInvalid && 'popup__submit_disabled'}`} type=\"submit\" disabled={formInvalid}>{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section> \r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\n\r\nfunction AddPlacePopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  \r\n  //fields\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    if(!formInvalid){\r\n      e.preventDefault();\r\n      // Pass the values of the managed components to the external handler\r\n      props.onAddPlace(name, link);\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  React.useEffect(()=>{\r\n    setName('');\r\n    setLink('');\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [linkError, setLinkError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n  function handleName(e) {\r\n    //set value\r\n    setName(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setNameError)\r\n  }\r\n\r\n  function handleLink(e) {\r\n    //set value\r\n    setLink(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setLinkError)\r\n  }\r\n  \r\n    function validateForm(){\r\n      props.formValidator(formRef.current,'.popup__input')? setFormInvalid(true) : setFormInvalid(false);\r\n    }\r\n\r\n  return(\r\n    <section className={`popup popup_type_add-card ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_add-card')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_add-card`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_add-card`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">New Place</h4>\r\n        <input className={`popup__input popup__input-card-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"card-name-input\" type=\"text\" name=\"name\" placeholder=\"Title\" required minLength=\"1\" maxLength=\"30\" value={name} onChange={handleName}/>\r\n      <span className={`popup__input-error\" id=\"card-name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n      \r\n      <input className={`popup__input popup__input-card-url ${linkError !=='' && 'popup__input_type_error'}`} id=\"url-input\" type=\"url\" name=\"link\" placeholder=\"Image URL\" required value={link} onChange={handleLink}/>\r\n      <span className={`popup__input-error ${linkError !=='' && 'popup__error_visible'}`} id=\"url-input-error\">{linkError}</span>\r\n  <button className={`popup__submit popup__add-card-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Create'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction DeletePopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onDelete(props.card._id);\r\n\r\n    //set loading\r\n    setLoading(true);\r\n  }\r\n\r\n\r\n  return(\r\n    <section className={`popup popup_type_delete ${props.isOpen && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_delete')}}>\r\n      <div className=\"popup__container\">\r\n        <form className=\"popup__form\" onSubmit={handleSubmit}>\r\n          <button className=\"popup__close popup__close_type_add-card\"></button>  \r\n          <h4 className=\"popup__title popup__title_type_no-bottom-margin\">Are you sure?</h4>\r\n          <button className=\"popup__submit popup__delete-submit\" type=\"submit\">{`${loading ? 'Loading...':'Delete'}`}</button>      \r\n        </form>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default DeletePopup;","import React from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nfunction Login(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  //form field\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[])\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();   \r\n    if(!formInvalid){\r\n      //check if the form is valid before sending\r\n      //login user\r\n      setLoading(true);\r\n      props.logInUser(email, password);\r\n      //set loading\r\n      setLoading(false);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [emailError, setEmailError] = React.useState('');\r\n  const [passwordError, setPasswordError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n\r\nfunction handleEmail(e) {\r\n  //set value\r\n  setEmail(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setEmailError)\r\n}\r\n\r\nfunction handlePassword(e) {\r\n  //set value\r\n  setPassword(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setPasswordError)\r\n}\r\n\r\nfunction validateForm(){\r\n  props.formValidator(formRef.current,'.login__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n}\r\n\r\n  return(\r\n    <section className=\"login\">\r\n    <div className=\"login__container\">\r\n      <form className=\"login__form\" onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n      <h1 className=\"login__title\">Log in</h1>\r\n        <input className={`login__input ${emailError !=='' && 'popup__input_type_error'}`} id=\"email-input\" type=\"email\" name=\"email\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Email\" value={email} onChange={handleEmail}/>\r\n          <span className={`popup__input-error  ${emailError !=='' && 'popup__error_visible'}`}>{emailError}</span>\r\n        <input className={`login__input ${passwordError !=='' && 'popup__input_type_error'}`} id=\"password-input\" type=\"password\" name=\"password\" minLength=\"7\" maxLength=\"12\" required placeholder=\"Password\" value={password} onChange={handlePassword}/>\r\n          <span className={`popup__input-error ${passwordError !=='' && 'popup__error_visible'}`}>{passwordError}</span>\r\n        <button className={`login__submit ${formInvalid && 'login__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Log In'}`} </button>\r\n      </form>\r\n      <p className=\"login__caption\">Not a member yet? Sign up <Link to=\"./signup\" className=\"login__link\">here</Link>!</p>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default withRouter(Login);","import React from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nfunction SignUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n    //form field\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    e.preventDefault();\r\n    if(!formInvalid){   \r\n      //register user\r\n      setLoading(true);\r\n      props.registerUser(email, password);\r\n      setLoading(false);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [emailError, setEmailError] = React.useState('');\r\n  const [passwordError, setPasswordError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleEmail(e) {\r\n  //set value\r\n  setEmail(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setEmailError)\r\n}\r\n\r\nfunction handlePassword(e) {\r\n  //set value\r\n  setPassword(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setPasswordError)\r\n}\r\n\r\nfunction validateForm(){\r\n  props.formValidator(formRef.current,'.login__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n}\r\n\r\n  return(\r\n    <section className=\"login\">\r\n    <div className=\"login__container\">\r\n      <form className=\"login__form\" onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n      <h1 className=\"login__title\">Sign up</h1>\r\n        <input className={`login__input ${emailError !=='' && 'popup__input_type_error'}`} id=\"email-input\" type=\"email\" name=\"email\" minLength=\"2\" maxLength=\"40\" required placeholder=\"Email\" value={email} onChange={handleEmail}/>\r\n          <span className={`popup__input-error  ${emailError !=='' && 'popup__error_visible'}`}>{emailError}</span>\r\n        <input className={`login__input ${passwordError !=='' && 'popup__input_type_error'}`} id=\"password-input\" type=\"password\" name=\"password\" minLength=\"7\" maxLength=\"12\" required placeholder=\"Password\" value={password} onChange={handlePassword}/>\r\n          <span className={`popup__input-error ${passwordError !=='' && 'popup__error_visible'}`}>{passwordError}</span>\r\n        <button className={`login__submit ${formInvalid && 'login__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Sign Up'}`}</button>\r\n      </form>\r\n      <p className=\"login__caption\">Already a member? Log in <Link to=\"./login\" className=\"login__link\">here</Link>!</p>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default withRouter(SignUp);","/* external */\r\n// export const token = '81e205aa-8028-44df-98a0-52d33fa82698';\r\n// export const groupId = 'group-4';\r\n// export const baseURL ='https://register.nomoreparties.co';\r\n/* backend */\r\nexport const baseURL ='http://localhost:5000';\r\n","import {baseURL as BASE_URL} from './config';\r\n\r\nclass Auth{\r\n  register(email, password){\r\n    return fetch(`${BASE_URL}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\"email\" : email, \"password\" : password})\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  login(email, password){\r\n    return fetch(`${BASE_URL}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\"email\" : email, \"password\" : password})\r\n    })\r\n    .then((response) => response.json())\r\n    .then((res) => {\r\n      if(res.token){\r\n        localStorage.setItem('token', res.token);\r\n        return res;\r\n      }\r\n    })\r\n  }\r\n\r\n  authorize(){\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'authorization': `${localStorage.getItem('token')}`\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })  \r\n  }\r\n\r\n}\r\n\r\nexport const auth = new Auth();","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to='/login' />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute; ","import React from 'react';\r\n\r\nfunction InfoTooltip(props){\r\n\r\n  return(\r\n    <section className={`popup popup_type_tooltip ${props.isOpen && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_tooltip')}}>\r\n      <div className=\"popup__container\">\r\n        <div className=\"popup__body\">\r\n        <button className=\"popup__close popup__close_type_tooltip\" type=\"button\" onClick={props.onClose}></button>  \r\n        <div className={`${props.success ? 'popup__icon_type_success' : 'popup__icon_type_failure'}`}></div>     \r\n        <h4 className=\"popup__title popup__title_type_bottom-margin-60\">{props.success ? `Success! You have now been registered`:`Oops, something went wrong! Please try again.`}</h4>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;","//import {token, groupId} from './config';\r\nimport {baseURL} from './config';\r\nclass Api{\r\n  constructor({baseURL}){\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  setToken(token){\r\n    this.token = token;\r\n  }\r\n  \r\n  /* API FUNCTIONS */\r\n  getUser(){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n  \r\n  getCards(){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editProfile(name, about){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editAvatar(link){\r\n    return fetch(`${this.baseURL}/users/me/avatar`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editAvatar Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  addCard(name, link){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  deleteCard(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, liked){\r\n    return liked ? this.deleteLike(cardId) : this.addLike(cardId);\r\n  }\r\n\r\n  addLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n\r\n  }\r\n\r\n  deleteLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseURL : baseURL, \r\n});\r\n\r\nexport {api};","class FormValidator{\r\n  //validate a form\r\n  formValidator(form, selector){\r\n    const inputList = Array.from(form.querySelectorAll(selector));\r\n    return inputList.some((inputElement) => {\r\n      return !inputElement.validity.valid;\r\n    }) ? true : false;\r\n  }\r\n\r\n  //valid individual field\r\n  fieldValidator(input, errorFunction){\r\n    !input.validity.valid ? errorFunction(input.validationMessage) : errorFunction('');\r\n  }\r\n}\r\n\r\nexport const formValidator = new FormValidator();\r\n","import React from 'react';\r\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\r\n\r\n//component\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithImage from './PopupWithImage';\r\nimport EditProfilePopUp from './EditProfilePopUp';\r\nimport EditAvatarPopUp from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport DeletePopup from './DeletePopup';\r\n\r\n//login\r\nimport Login from './Login';\r\nimport SignUp from './SignUp';\r\nimport {auth} from '../utils/auth';\r\nimport ProtectedRoute from './ProtectedRoute'\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\n//context\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n//util\r\nimport {api} from '../utils/api';\r\nimport {formValidator} from '../utils/formvalidator'\r\n\r\nfunction App() {\r\n  //history\r\n  const history = useHistory();\r\n\r\n  //state\r\n  const [selectedCard, setselectedCard] = React.useState({link:'#'});\r\n  const [currentUser, setcurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [loggedIn, setloggedIn] = React.useState(false);\r\n\r\n  //isOpen props for popups\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setisEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeletePopupOpen, setisDeletePopupOpen] = React.useState(false); \r\n  const [isCardOpen, setisCardOpen] = React.useState(false);\r\n  const [isToolTipOpen, setisToolTipOpen] = React.useState(false);\r\n  const [isSuccess, setisSuccess] = React.useState(false);\r\n\r\n  //update user functions\r\n  function handleUpdateUser(name, about){\r\n    api.editProfile(name, about)\r\n    .then((data)=>{\r\n      setcurrentUser(data);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);  \r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n\r\n  function handleUpdateAvatar(link){\r\n    api.editAvatar(link)\r\n    .then((data)=>{\r\n      setcurrentUser(data);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n  //card functions\r\n  function handleDeleteClick(card){\r\n    setselectedCard(card);\r\n    setisDeletePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card){\r\n    setisCardOpen(true);\r\n    setselectedCard(card);\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    // Check one more time if this card was already liked\r\n    //const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    const isLiked = card.likes.some(i => i === currentUser._id);\r\n    \r\n    // Send a request to the API and getting the updated card data\r\n    api.changeLikeCardStatus(card._id, isLiked).then((newCard) => {\r\n        // Create a new array based on the existing one and putting a new card into it\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Update the state\r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n      alert(err);\r\n    })\r\n    .finally(()=>{closeAllPopups()})\r\n  } \r\n\r\n  function handleCardDelete(cardId){\r\n    //delete the card\r\n    api.deleteCard(cardId)\r\n    .then(() => { \r\n      const newCards = cards.filter((c)=>{\r\n        return c._id !== cardId;\r\n      }); \r\n      setCards(newCards);\r\n    })\r\n    .catch((err) => { \r\n        console.log(err); \r\n        alert(err);\r\n      })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n  \r\n  //popup functions\r\n  function handleEditProfileClick(){\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick(){\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleEditAvatarClick(){\r\n    setisEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceSubmit(name, link){\r\n    api.addCard(name,link).then((newCard) => { \r\n      setCards([...cards, newCard]); \r\n    })\r\n    .catch((err) => { \r\n        console.log(err); \r\n        alert(err);\r\n      })\r\n    .finally(()=>{closeAllPopups()})\r\n  }\r\n\r\n  //login functions\r\n  function handleLogin(isLoggedIn){\r\n    setloggedIn(isLoggedIn);\r\n    if(!isLoggedIn){\r\n    //delete token\r\n    setcurrentUser({});\r\n    localStorage.removeItem('token');\r\n    }\r\n  }\r\n\r\n  function handleDisplayInfoTooltip(success){\r\n    setisSuccess(success);\r\n    setisToolTipOpen(true);\r\n  }\r\n\r\n  function handleRegisterUser(email, password){\r\n    auth.register(email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        handleDisplayInfoTooltip(true);\r\n        history.push(\"/login\");\r\n        handleLogInUser(email, password);\r\n      }\r\n      else{\r\n        handleDisplayInfoTooltip(false);\r\n      }\r\n    })\r\n  }\r\n\r\n  function handleLogInUser(email, password){\r\n    auth.login(email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        handleLogin(true);\r\n        history.push(\"/\");\r\n      }\r\n      else{\r\n        handleDisplayInfoTooltip(false);\r\n      }\r\n    })\r\n  }\r\n  \r\n  //close and reset popups\r\n  function closeAllPopups(){\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setisEditAvatarPopupOpen(false);\r\n    setisDeletePopupOpen(false);\r\n    setisCardOpen(false);\r\n    setisToolTipOpen(false);\r\n    setselectedCard({link:'#'});\r\n  }\r\n  \r\n  //click outside container \r\n  function handleClickOutsideForm(e, selector){\r\n    if(e.target.className.includes(selector)){\r\n      closeAllPopups();\r\n    }\r\n  }\r\n\r\n  //close window when escape is pressed\r\n  const handleKeyPress = React.useCallback((e) => {\r\n      if(e.key === 'Escape'){ \r\n        closeAllPopups(); \r\n      } \r\n    }, []);\r\n\r\n//add Escape event\r\nReact.useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyPress);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyPress);\r\n    };\r\n  }, [handleKeyPress]);\r\n\r\n    //get user and initial cards\r\n    React.useEffect(()=>{\r\n      //get user from token\r\n      if (localStorage.getItem('token')) {\r\n        const token = localStorage.getItem('token');\r\n        api.setToken(token);\r\n        setloggedIn(true);\r\n        api.getUser()\r\n        .then((data)=>{\r\n          setcurrentUser(data);\r\n          //get cards\r\n          api.getCards()\r\n          .then((data) => {  \r\n            setCards(data)\r\n          })\r\n          .catch((err) => { \r\n            console.log(err);\r\n          })\r\n        })\r\n        .catch((err) => { \r\n          console.log(err);\r\n        })\r\n      }\r\n      //after loading everything, set loading to false\r\n      setLoading(false);\r\n    },[currentUser, loggedIn])\r\n\r\n  return (\r\n    //show loading message if user and cards are not loaded\r\n  loading ? <div className=\"App page loading\">Loading page...</div> :\r\n\r\n<div className=\"App page\">\r\n<CurrentUserContext.Provider value={currentUser}>\r\n  <Header loggedIn={loggedIn} login={handleLogin}  />\r\n  <Switch>\r\n  <Route path=\"/signup\">\r\n    <SignUp\r\n      formValidator={formValidator.formValidator}\r\n      fieldValidator={formValidator.fieldValidator}\r\n      registerUser={handleRegisterUser}\r\n    />\r\n  </Route>\r\n  <Route path=\"/login\">\r\n  {\r\n    () => !loggedIn ?\r\n    <Login\r\n      formValidator={formValidator.formValidator}\r\n      fieldValidator={formValidator.fieldValidator}\r\n      logInUser={handleLogInUser}\r\n    /> : \r\n    //redirect to main if already logged in\r\n    <Redirect to='/' />\r\n  }\r\n  </Route>\r\n  <ProtectedRoute path=\"*\" \r\n    loggedIn={loggedIn} \r\n    component={Main}\r\n    onEditProfile = {handleEditProfileClick}\r\n    onAddPlace = {handleAddPlaceClick}\r\n    onEditAvatar = {handleEditAvatarClick}\r\n    onCardClick = {handleCardClick}\r\n    card = {selectedCard}\r\n    cards = {cards}\r\n    onCardLike = {handleCardLike}\r\n    onCardDelete = {handleDeleteClick}\r\n  >\r\n  </ProtectedRoute>\r\n  </Switch>\r\n  <Footer />\r\n  <EditProfilePopUp \r\n    isOpen={isEditProfilePopupOpen} \r\n    onClose={closeAllPopups}\r\n    onUpdateUser={handleUpdateUser}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n  />\r\n\r\n  <AddPlacePopup \r\n    isOpen={isAddPlacePopupOpen} \r\n    onClose={closeAllPopups}\r\n    onAddPlace={handleAddPlaceSubmit}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n    />\r\n\r\n  <EditAvatarPopUp \r\n    isOpen={isEditAvatarPopupOpen} \r\n    onClose={closeAllPopups}\r\n    onUpdateAvatar={handleUpdateAvatar}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    formValidator={formValidator.formValidator}\r\n    fieldValidator={formValidator.fieldValidator}\r\n    />\r\n  \r\n  <PopupWithImage \r\n    card={selectedCard} \r\n    isOpen={isCardOpen}\r\n    onClose={closeAllPopups}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    />\r\n\r\n  <DeletePopup \r\n    isOpen={isDeletePopupOpen} \r\n    onClose={closeAllPopups}\r\n    card = {selectedCard}\r\n    onDelete = {handleCardDelete}\r\n    onOutsideClick={handleClickOutsideForm}\r\n  /> \r\n\r\n  <InfoTooltip \r\n    isOpen={isToolTipOpen} \r\n    onClose={closeAllPopups}\r\n    onOutsideClick={handleClickOutsideForm}\r\n    success={isSuccess}\r\n  />\r\n</CurrentUserContext.Provider>\r\n</div>\r\n)}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"]}}