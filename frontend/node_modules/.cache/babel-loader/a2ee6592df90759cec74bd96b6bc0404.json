{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\ZEE\\\\Yandex\\\\react-around-api-full\\\\frontend\\\\src\\\\components\\\\EditProfilePopUp.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopUp(props) {\n  _s();\n\n  //loading\n  const [loading, setLoading] = React.useState(false); // Subscription to the context\n\n  const currentUser = React.useContext(CurrentUserContext); //form field\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState(''); //reset form on open\n\n  React.useEffect(() => {\n    setFormInvalid(true);\n    setLoading(false); //set default values\n\n    currentUser.name && setName(currentUser.name);\n    currentUser.about && setDescription(currentUser.about);\n  }, [props.isOpen]);\n\n  function handleSubmit(e) {\n    //check if the form is valid before sending\n    if (!formInvalid) {\n      e.preventDefault(); // Pass the values of the managed components to the external handler\n\n      props.onUpdateUser(name, description); //set loading\n\n      setLoading(true);\n    }\n  }\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n      The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\n\n\n  const formRef = React.useRef();\n  const [nameError, setNameError] = React.useState('');\n  const [descriptionError, setDescriptionError] = React.useState('');\n  const [formInvalid, setFormInvalid] = React.useState(true);\n\n  function handleName(e) {\n    //set value\n    setName(e.target.value); //set error\n\n    props.fieldValidator(e.target, setNameError);\n  }\n\n  function handleDescription(e) {\n    //set value\n    setDescription(e.target.value); //set error\n\n    props.fieldValidator(e.target, setDescriptionError);\n  }\n\n  function validateForm() {\n    props.formValidator(formRef.current, '.popup__input') ? setFormInvalid(true) : setFormInvalid(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: `popup popup_type_edit-profile ${props.isOpen && 'popup_state_opened'}`,\n    onClick: e => {\n      props.onOutsideClick(e, 'popup_type_edit-profile');\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup__container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: `popup__form popup__form_type_edit-profile`,\n        onSubmit: handleSubmit,\n        onChange: validateForm,\n        ref: formRef,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `popup__close popup__close_type_edit-profile`,\n          type: \"button\",\n          onClick: props.onClose\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"popup__title\",\n          children: \"Edit Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: `popup__input popup__input-name ${nameError !== '' && 'popup__input_type_error'}`,\n          id: \"name-input\",\n          type: \"text\",\n          name: \"name\",\n          required: true,\n          minLength: \"2\",\n          maxLength: \"40\",\n          placeholder: currentUser.name,\n          value: name,\n          onChange: handleName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `popup__input-error\" id=\"name-input-error ${nameError !== '' && 'popup__error_visible'}`,\n          children: nameError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: `popup__input popup__input-description ${descriptionError !== '' && 'popup__input_type_error'}`,\n          id: \"description-input\",\n          type: \"text\",\n          name: \"description\",\n          required: true,\n          minLength: \"2\",\n          maxLength: \"200\",\n          placeholder: currentUser.about,\n          value: description,\n          onChange: handleDescription\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `popup__input-error\" id=\"description-input-error ${descriptionError !== '' && 'popup__error_visible'}`,\n          children: descriptionError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `popup__submit popup__edit-profile-submit ${formInvalid && 'popup__submit_disabled'}`,\n          disabled: formInvalid,\n          type: \"submit\",\n          children: `${loading ? 'Loading...' : 'Save'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditProfilePopUp, \"VMVXkAdVqaItNgWyBPVzJpZgWp0=\");\n\n_c = EditProfilePopUp;\nexport default EditProfilePopUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfilePopUp\");","map":{"version":3,"sources":["C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/EditProfilePopUp.js"],"names":["React","CurrentUserContext","EditProfilePopUp","props","loading","setLoading","useState","currentUser","useContext","name","setName","description","setDescription","useEffect","setFormInvalid","about","isOpen","handleSubmit","e","formInvalid","preventDefault","onUpdateUser","formRef","useRef","nameError","setNameError","descriptionError","setDescriptionError","handleName","target","value","fieldValidator","handleDescription","validateForm","formValidator","current","onOutsideClick","onClose"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  // Subscription to the context\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n    //form field\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n\r\n    //set default values\r\n    currentUser.name && setName(currentUser.name);\r\n    currentUser.about && setDescription(currentUser.about);\r\n  },[props.isOpen])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    if(!formInvalid){\r\n      e.preventDefault();   \r\n      // Pass the values of the managed components to the external handler\r\n      props.onUpdateUser(name, description);\r\n\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [descriptionError, setDescriptionError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleName(e) {\r\n  //set value\r\n  setName(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setNameError)\r\n}\r\n\r\nfunction handleDescription(e) {\r\n  //set value\r\n  setDescription(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setDescriptionError)\r\n}\r\n\r\n  function validateForm(){\r\n    props.formValidator(formRef.current,'.popup__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n  }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-profile ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-profile')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-profile`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-profile`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Edit Profile</h4>\r\n        <input className={`popup__input popup__input-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"name-input\" type=\"text\" name=\"name\" required minLength=\"2\" maxLength=\"40\" placeholder={currentUser.name} value={name} onChange={handleName}/>\r\n          <span className={`popup__input-error\" id=\"name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n        <input className={`popup__input popup__input-description ${descriptionError !=='' && 'popup__input_type_error'}`} id=\"description-input\" type=\"text\" name=\"description\" required minLength=\"2\" maxLength=\"200\" placeholder={currentUser.about} value={description} onChange={handleDescription}/>\r\n          <span className={`popup__input-error\" id=\"description-input-error ${descriptionError !=='' && 'popup__error_visible'}`}>{descriptionError}</span>\r\n        <button className={`popup__submit popup__edit-profile-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default EditProfilePopUp;"]},"metadata":{},"sourceType":"module"}