{"ast":null,"code":"import _slicedToArray from\"C:/Users/ZEE/Yandex/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';function AddPlacePopup(props){//loading\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];//fields\nvar _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),link=_React$useState6[0],setLink=_React$useState6[1];function handleSubmit(e){if(!formInvalid){e.preventDefault();// Pass the values of the managed components to the external handler\nprops.onAddPlace(name,link);//set loading\nsetLoading(true);}}React.useEffect(function(){setName('');setLink('');setFormInvalid(true);setLoading(false);},[props.isOpen]);/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=React.useRef();var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),nameError=_React$useState8[0],setNameError=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),linkError=_React$useState10[0],setLinkError=_React$useState10[1];var _React$useState11=React.useState(true),_React$useState12=_slicedToArray(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleName(e){//set value\nsetName(e.target.value);//set error\nprops.fieldValidator(e.target,setNameError);}function handleLink(e){//set value\nsetLink(e.target.value);//set error\nprops.fieldValidator(e.target,setLinkError);}function validateForm(){props.formValidator(formRef.current,'.popup__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/_jsx(\"section\",{className:\"popup popup_type_add-card \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_add-card');},children:/*#__PURE__*/_jsx(\"div\",{className:\"popup__container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"popup__form popup__form_type_add-card\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close popup__close_type_add-card\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/_jsx(\"h4\",{className:\"popup__title\",children:\"New Place\"}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input-card-name \".concat(nameError!==''&&'popup__input_type_error'),id:\"card-name-input\",type:\"text\",name:\"name\",placeholder:\"Title\",required:true,minLength:\"1\",maxLength:\"30\",value:name,onChange:handleName}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error\\\" id=\\\"card-name-input-error \".concat(nameError!==''&&'popup__error_visible'),children:nameError}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input-card-url \".concat(linkError!==''&&'popup__input_type_error'),id:\"url-input\",type:\"url\",name:\"link\",placeholder:\"Image URL\",required:true,value:link,onChange:handleLink}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error \".concat(linkError!==''&&'popup__error_visible'),id:\"url-input-error\",children:linkError}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__submit popup__add-card-submit \".concat(formInvalid&&'popup__submit_disabled'),disabled:formInvalid,type:\"submit\",children:\"\".concat(loading?'Loading...':'Create')})]})})});}export default AddPlacePopup;","map":{"version":3,"sources":["C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/AddPlacePopup.js"],"names":["React","AddPlacePopup","props","useState","loading","setLoading","name","setName","link","setLink","handleSubmit","e","formInvalid","preventDefault","onAddPlace","useEffect","setFormInvalid","isOpen","formRef","useRef","nameError","setNameError","linkError","setLinkError","handleName","target","value","fieldValidator","handleLink","validateForm","formValidator","current","onOutsideClick","onClose"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nfunction AddPlacePopup(props){\r\n  //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  \r\n  //fields\r\n  const [name, setName] = React.useState('');\r\n  const [link, setLink] = React.useState('');\r\n\r\n  function handleSubmit(e) {\r\n    if(!formInvalid){\r\n      e.preventDefault();\r\n      // Pass the values of the managed components to the external handler\r\n      props.onAddPlace(name, link);\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  React.useEffect(()=>{\r\n    setName('');\r\n    setLink('');\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n  },[props.isOpen])\r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [linkError, setLinkError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\n  function handleName(e) {\r\n    //set value\r\n    setName(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setNameError)\r\n  }\r\n\r\n  function handleLink(e) {\r\n    //set value\r\n    setLink(e.target.value);\r\n    //set error\r\n    props.fieldValidator(e.target, setLinkError)\r\n  }\r\n  \r\n    function validateForm(){\r\n      props.formValidator(formRef.current,'.popup__input')? setFormInvalid(true) : setFormInvalid(false);\r\n    }\r\n\r\n  return(\r\n    <section className={`popup popup_type_add-card ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_add-card')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_add-card`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_add-card`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">New Place</h4>\r\n        <input className={`popup__input popup__input-card-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"card-name-input\" type=\"text\" name=\"name\" placeholder=\"Title\" required minLength=\"1\" maxLength=\"30\" value={name} onChange={handleName}/>\r\n      <span className={`popup__input-error\" id=\"card-name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n      \r\n      <input className={`popup__input popup__input-card-url ${linkError !=='' && 'popup__input_type_error'}`} id=\"url-input\" type=\"url\" name=\"link\" placeholder=\"Image URL\" required value={link} onChange={handleLink}/>\r\n      <span className={`popup__input-error ${linkError !=='' && 'popup__error_visible'}`} id=\"url-input-error\">{linkError}</span>\r\n  <button className={`popup__submit popup__add-card-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Create'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;"]},"metadata":{},"sourceType":"module"}