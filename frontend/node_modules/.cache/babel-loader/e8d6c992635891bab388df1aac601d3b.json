{"ast":null,"code":"import _classCallCheck from\"C:/Users/ZEE/Yandex/react-around-api-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/ZEE/Yandex/react-around-api-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import{baseURL}from'./config';var Api=/*#__PURE__*/function(){function Api(_ref){var baseURL=_ref.baseURL;_classCallCheck(this,Api);this.baseURL=baseURL;}_createClass(Api,[{key:\"setToken\",value:function setToken(token){this.token=token;}/* API FUNCTIONS */},{key:\"getUser\",value:function getUser(){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{headers:{authorization:this.token}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"getCards\",value:function getCards(){return fetch(\"\".concat(this.baseURL,\"/cards\"),{headers:{authorization:this.token}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"editProfile\",value:function editProfile(name,about){return fetch(\"\".concat(this.baseURL,\"/users/me\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,about:about})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"editAvatar\",value:function editAvatar(link){return fetch(\"\".concat(this.baseURL,\"/users/me/avatar\"),{method:\"PATCH\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({avatar:link})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editAvatar Error: \".concat(res.statusText));});}},{key:\"addCard\",value:function addCard(name,link){return fetch(\"\".concat(this.baseURL,\"/cards\"),{method:\"POST\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,link:link})}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"deleteCard\",value:function deleteCard(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.statusText));});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,liked){return liked?this.deleteLike(cardId):this.addLike(cardId);}},{key:\"addLike\",value:function addLike(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId,\"/likes\"),{method:\"PUT\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editLikes Error: \".concat(res.statusText));});}},{key:\"deleteLike\",value:function deleteLike(cardId){return fetch(\"\".concat(this.baseURL,\"/cards/\").concat(cardId,\"/likes\"),{method:\"DELETE\",headers:{authorization:this.token,\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){return res.json();}return Promise.reject(\"editLikes Error: \".concat(res.statusText));});}}]);return Api;}();var api=new Api({baseURL:baseURL});export{api};","map":{"version":3,"sources":["C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/utils/api.js"],"names":["baseURL","Api","token","fetch","headers","authorization","then","res","ok","json","Promise","reject","statusText","name","about","method","body","JSON","stringify","link","avatar","cardId","liked","deleteLike","addLike","api"],"mappings":"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","sourcesContent":["import {baseURL} from './config';\r\nclass Api{\r\n  constructor({baseURL}){\r\n    this.baseURL = baseURL;\r\n  }\r\n\r\n  setToken(token){\r\n    this.token = token;\r\n  }\r\n  \r\n  /* API FUNCTIONS */\r\n  getUser(){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n  \r\n  getCards(){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      headers: {\r\n        authorization: this.token\r\n      }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editProfile(name, about){\r\n    return fetch(`${this.baseURL}/users/me`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  editAvatar(link){\r\n    return fetch(`${this.baseURL}/users/me/avatar`,{\r\n      method: \"PATCH\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editAvatar Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  addCard(name, link){\r\n    return fetch(`${this.baseURL}/cards`,{\r\n      method: \"POST\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link\r\n        })\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  deleteCard(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error: ${res.statusText}`);\r\n    })\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, liked){\r\n    return liked ? this.deleteLike(cardId) : this.addLike(cardId);\r\n  }\r\n\r\n  addLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"PUT\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n\r\n  }\r\n\r\n  deleteLike(cardId){\r\n    return fetch(`${this.baseURL}/cards/${cardId}/likes`,{\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this.token,\r\n        \"Content-Type\": \"application/json\"\r\n        }\r\n    })\r\n    .then((res) => {\r\n      if(res.ok){\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`editLikes Error: ${res.statusText}`);\r\n    })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseURL : baseURL, \r\n});\r\n\r\nexport {api};"]},"metadata":{},"sourceType":"module"}