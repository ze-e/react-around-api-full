{"ast":null,"code":"import _slicedToArray from\"C:/Users/ZEE/Yandex/react-around-api-full/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import React from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';function Card(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isLiked=_React$useState2[0],setIsLiked=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isOwn=_React$useState4[0],setIsOwn=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),likesLength=_React$useState6[0],setlikesLength=_React$useState6[1];var currentUser=React.useContext(CurrentUserContext);function handleClick(){props.onCardClick(props.card);}function handleLike(){props.onCardLike(props.card);}function handleDelete(){props.onCardDelete(props.card);}//control delete button visibility\nReact.useEffect(function(){if(props.card.owner){props.card.owner===currentUser._id?setIsOwn(true):setIsOwn(false);}},[props.card]);//const isOwn = props.card.owner._id === currentUser._id;\nvar cardDeleteButtonClassName=\"element__delete-button \".concat(isOwn&&'element__delete-button_visibility_visible');//check if card was already liked\nReact.useEffect(function(){if(props.card.likes){props.card.likes.some(function(i){return i===currentUser._id;})?setIsLiked(true):setIsLiked(false);}},[props.card]);//const isLiked = props.card.likes.some(i => i._id === currentUser._id);\nvar cardLikeButtonClassName=\"element__like-button \".concat(isLiked&&'element__like-button_stateliked');//get number of likes\nReact.useEffect(function(){if(props.card.likes){setlikesLength(props.card.likes.length);}},[props.card]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:cardDeleteButtonClassName,onClick:handleDelete}),/*#__PURE__*/_jsx(\"img\",{className:\"element__image\",src:props.card.link,onClick:handleClick,alt:\"place\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"element__text\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"element__title\",children:props.card.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"element__likes-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:cardLikeButtonClassName,onClick:handleLike}),/*#__PURE__*/_jsx(\"p\",{className:\"element__likes-display\",children:likesLength})]})]})]});}export default Card;","map":{"version":3,"sources":["C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/Card.js"],"names":["React","CurrentUserContext","Card","props","useState","isLiked","setIsLiked","isOwn","setIsOwn","likesLength","setlikesLength","currentUser","useContext","handleClick","onCardClick","card","handleLike","onCardLike","handleDelete","onCardDelete","useEffect","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","length","link","name"],"mappings":"6SAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,kBAAR,KAAiC,gCAAjC,CACA,QAASC,CAAAA,IAAT,CAAcC,KAAd,CAAoB,qBAEYH,KAAK,CAACI,QAAN,CAAe,KAAf,CAFZ,oDAEXC,OAFW,qBAEFC,UAFE,0CAGQN,KAAK,CAACI,QAAN,CAAe,KAAf,CAHR,qDAGXG,KAHW,qBAGJC,QAHI,0CAIoBR,KAAK,CAACI,QAAN,CAAe,CAAf,CAJpB,qDAIXK,WAJW,qBAIEC,cAJF,qBAMlB,GAAMC,CAAAA,WAAW,CAAGX,KAAK,CAACY,UAAN,CAAiBX,kBAAjB,CAApB,CAEA,QAASY,CAAAA,WAAT,EAAuB,CACrBV,KAAK,CAACW,WAAN,CAAkBX,KAAK,CAACY,IAAxB,EACD,CAED,QAASC,CAAAA,UAAT,EAAsB,CACpBb,KAAK,CAACc,UAAN,CAAiBd,KAAK,CAACY,IAAvB,EACD,CAED,QAASG,CAAAA,YAAT,EAAwB,CACtBf,KAAK,CAACgB,YAAN,CAAmBhB,KAAK,CAACY,IAAzB,EACD,CAED;AACAf,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAGjB,KAAK,CAACY,IAAN,CAAWM,KAAd,CAAoB,CAClBlB,KAAK,CAACY,IAAN,CAAWM,KAAX,GAAqBV,WAAW,CAACW,GAAjC,CAAuCd,QAAQ,CAAC,IAAD,CAA/C,CAAwDA,QAAQ,CAAC,KAAD,CAAhE,CACD,CACF,CAJD,CAIE,CAACL,KAAK,CAACY,IAAP,CAJF,EAKA;AAEA,GAAMQ,CAAAA,yBAAyB,kCACHhB,KAAK,EAAI,2CADN,CAA/B,CAIA;AACAP,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAGjB,KAAK,CAACY,IAAN,CAAWS,KAAd,CAAoB,CAClBrB,KAAK,CAACY,IAAN,CAAWS,KAAX,CAAiBC,IAAjB,CAAsB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,GAAKf,WAAW,CAACW,GAAtB,EAAvB,EAAoDhB,UAAU,CAAC,IAAD,CAA9D,CAAuEA,UAAU,CAAC,KAAD,CAAjF,CACD,CACF,CAJD,CAIE,CAACH,KAAK,CAACY,IAAP,CAJF,EAKA;AAEA,GAAMY,CAAAA,uBAAuB,gCAA2BtB,OAAO,EAAI,iCAAtC,CAA7B,CAEA;AACAL,KAAK,CAACoB,SAAN,CAAgB,UAAM,CACpB,GAAGjB,KAAK,CAACY,IAAN,CAAWS,KAAd,CAAoB,CAClBd,cAAc,CAACP,KAAK,CAACY,IAAN,CAAWS,KAAX,CAAiBI,MAAlB,CAAd,CACD,CACF,CAJD,CAIE,CAACzB,KAAK,CAACY,IAAP,CAJF,EAMA,mBACA,wCACA,YAAK,SAAS,CAAEQ,yBAAhB,CAA2C,OAAO,CAAEL,YAApD,EADA,cAEA,YAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAEf,KAAK,CAACY,IAAN,CAAWc,IAAhD,CAAsD,OAAO,CAAEhB,WAA/D,CAA4E,GAAG,CAAC,OAAhF,EAFA,cAGA,aAAK,SAAS,CAAC,eAAf,wBACE,WAAI,SAAS,CAAC,gBAAd,UAAgCV,KAAK,CAACY,IAAN,CAAWe,IAA3C,EADF,cAEE,aAAK,SAAS,CAAC,0BAAf,wBACE,eAAQ,SAAS,CAAEH,uBAAnB,CAA4C,OAAO,CAAEX,UAArD,EADF,cAEE,UAAG,SAAS,CAAC,wBAAb,UAAuCP,WAAvC,EAFF,GAFF,GAHA,GADA,CAaD,CAED,cAAeP,CAAAA,IAAf","sourcesContent":["import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Card(props){\r\n  \r\n  const [isLiked, setIsLiked] = React.useState(false);\r\n  const [isOwn, setIsOwn] = React.useState(false);\r\n  const [likesLength, setlikesLength] = React.useState(0);\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  } \r\n\r\n  function handleLike() {\r\n    props.onCardLike(props.card);\r\n  } \r\n\r\n  function handleDelete() {\r\n    props.onCardDelete(props.card);\r\n  } \r\n\r\n  //control delete button visibility\r\n  React.useEffect(() => {\r\n    if(props.card.owner){\r\n      props.card.owner === currentUser._id ? setIsOwn(true) : setIsOwn(false);\r\n    }\r\n  },[props.card])\r\n  //const isOwn = props.card.owner._id === currentUser._id;\r\n\r\n  const cardDeleteButtonClassName = (\r\n    `element__delete-button ${isOwn && 'element__delete-button_visibility_visible'}`\r\n  ); \r\n\r\n  //check if card was already liked\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      props.card.likes.some(i => i === currentUser._id) ? setIsLiked(true) : setIsLiked(false);\r\n    }\r\n  },[props.card])\r\n  //const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `element__like-button ${isLiked && 'element__like-button_stateliked'}`; \r\n\r\n  //get number of likes\r\n  React.useEffect(() => {\r\n    if(props.card.likes){\r\n      setlikesLength(props.card.likes.length);\r\n    }\r\n  },[props.card])\r\n\r\n  return(\r\n  <>\r\n  <div className={cardDeleteButtonClassName} onClick={handleDelete} ></div>\r\n  <img className=\"element__image\" src={props.card.link} onClick={handleClick} alt=\"place\"/>\r\n  <div className=\"element__text\">\r\n    <h2 className=\"element__title\">{props.card.name}</h2>\r\n    <div className=\"element__likes-container\">\r\n      <button className={cardLikeButtonClassName} onClick={handleLike}></button>\r\n      <p className=\"element__likes-display\">{likesLength}</p>\r\n    </div>\r\n  </div>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Card;"]},"metadata":{},"sourceType":"module"}