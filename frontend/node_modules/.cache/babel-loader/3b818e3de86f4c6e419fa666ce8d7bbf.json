{"ast":null,"code":"import _slicedToArray from\"C:/Users/ZEE/Yandex/react-around-api-full/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import{CurrentUserContext}from'../contexts/CurrentUserContext';function EditProfilePopUp(props){//loading\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];// Subscription to the context\nvar currentUser=React.useContext(CurrentUserContext);//form field\nvar _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),name=_React$useState4[0],setName=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),description=_React$useState6[0],setDescription=_React$useState6[1];//reset form on open\nReact.useEffect(function(){setFormInvalid(true);setLoading(false);//set default values\ncurrentUser.name&&setName(currentUser.name);currentUser.about&&setDescription(currentUser.about);},[props.isOpen]);function handleSubmit(e){//check if the form is valid before sending\nif(!formInvalid){e.preventDefault();// Pass the values of the managed components to the external handler\nprops.onUpdateUser(name,description);//set loading\nsetLoading(true);}}/* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */var formRef=React.useRef();var _React$useState7=React.useState(''),_React$useState8=_slicedToArray(_React$useState7,2),nameError=_React$useState8[0],setNameError=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),descriptionError=_React$useState10[0],setDescriptionError=_React$useState10[1];var _React$useState11=React.useState(true),_React$useState12=_slicedToArray(_React$useState11,2),formInvalid=_React$useState12[0],setFormInvalid=_React$useState12[1];function handleName(e){//set value\nsetName(e.target.value);//set error\nprops.fieldValidator(e.target,setNameError);}function handleDescription(e){//set value\nsetDescription(e.target.value);//set error\nprops.fieldValidator(e.target,setDescriptionError);}function validateForm(){props.formValidator(formRef.current,'.popup__input')?setFormInvalid(true):setFormInvalid(false);}return/*#__PURE__*/_jsx(\"section\",{className:\"popup popup_type_edit-profile \".concat(props.isOpen&&'popup_state_opened'),onClick:function onClick(e){props.onOutsideClick(e,'popup_type_edit-profile');},children:/*#__PURE__*/_jsx(\"div\",{className:\"popup__container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"popup__form popup__form_type_edit-profile\",onSubmit:handleSubmit,onChange:validateForm,ref:formRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup__close popup__close_type_edit-profile\",type:\"button\",onClick:props.onClose}),/*#__PURE__*/_jsx(\"h4\",{className:\"popup__title\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input-name \".concat(nameError!==''&&'popup__input_type_error'),id:\"name-input\",type:\"text\",name:\"name\",required:true,minLength:\"2\",maxLength:\"40\",placeholder:currentUser.name,value:name,onChange:handleName}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error\\\" id=\\\"name-input-error \".concat(nameError!==''&&'popup__error_visible'),children:nameError}),/*#__PURE__*/_jsx(\"input\",{className:\"popup__input popup__input-description \".concat(descriptionError!==''&&'popup__input_type_error'),id:\"description-input\",type:\"text\",name:\"description\",required:true,minLength:\"2\",maxLength:\"200\",placeholder:currentUser.about,value:description,onChange:handleDescription}),/*#__PURE__*/_jsx(\"span\",{className:\"popup__input-error\\\" id=\\\"description-input-error \".concat(descriptionError!==''&&'popup__error_visible'),children:descriptionError}),/*#__PURE__*/_jsx(\"button\",{className:\"popup__submit popup__edit-profile-submit \".concat(formInvalid&&'popup__submit_disabled'),disabled:formInvalid,type:\"submit\",children:\"\".concat(loading?'Loading...':'Save')})]})})});}export default EditProfilePopUp;","map":{"version":3,"sources":["C:/Users/ZEE/Yandex/react-around-api-full/frontend/src/components/EditProfilePopUp.js"],"names":["React","CurrentUserContext","EditProfilePopUp","props","useState","loading","setLoading","currentUser","useContext","name","setName","description","setDescription","useEffect","setFormInvalid","about","isOpen","handleSubmit","e","formInvalid","preventDefault","onUpdateUser","formRef","useRef","nameError","setNameError","descriptionError","setDescriptionError","handleName","target","value","fieldValidator","handleDescription","validateForm","formValidator","current","onOutsideClick","onClose"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopUp(props){\r\n    //loading\r\n  const [loading, setLoading] = React.useState(false);\r\n  // Subscription to the context\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n    //form field\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  //reset form on open\r\n  React.useEffect(()=>{\r\n    setFormInvalid(true);\r\n    setLoading(false);\r\n\r\n    //set default values\r\n    currentUser.name && setName(currentUser.name);\r\n    currentUser.about && setDescription(currentUser.about);\r\n  },[props.isOpen])\r\n  \r\n  function handleSubmit(e) {\r\n    //check if the form is valid before sending\r\n    if(!formInvalid){\r\n      e.preventDefault();   \r\n      // Pass the values of the managed components to the external handler\r\n      props.onUpdateUser(name, description);\r\n\r\n      //set loading\r\n      setLoading(true);\r\n    }\r\n  } \r\n\r\n  /* CLIENT FORM VALIDATION\r\n    By default, no validation error for blank required field is \r\n    shown at the beginning, but the submit button will be\r\n    disabled.\r\n\r\n    The button style/disabled state and individual field validations are \r\n    independent of one another. Field validations control only the field styles, \r\n    and form/button validation controls the ability to send the form\r\n  */\r\n  const formRef = React.useRef();\r\n  const [nameError, setNameError] = React.useState('');\r\n  const [descriptionError, setDescriptionError] = React.useState('');\r\n  const [formInvalid, setFormInvalid] = React.useState(true)\r\n\r\nfunction handleName(e) {\r\n  //set value\r\n  setName(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setNameError)\r\n}\r\n\r\nfunction handleDescription(e) {\r\n  //set value\r\n  setDescription(e.target.value);\r\n  //set error\r\n  props.fieldValidator(e.target, setDescriptionError)\r\n}\r\n\r\n  function validateForm(){\r\n    props.formValidator(formRef.current,'.popup__input') ? setFormInvalid(true) : setFormInvalid(false);\r\n  }\r\n\r\n  return(\r\n    <section className={`popup popup_type_edit-profile ${props.isOpen  && 'popup_state_opened'}`} onClick={(e)=>{props.onOutsideClick(e,'popup_type_edit-profile')}}>\r\n    <div className=\"popup__container\">\r\n      <form className={`popup__form popup__form_type_edit-profile`} onSubmit={handleSubmit} onChange={validateForm} ref={formRef}>\r\n        <button className={`popup__close popup__close_type_edit-profile`} type=\"button\" onClick={props.onClose}></button>  \r\n        <h4 className=\"popup__title\">Edit Profile</h4>\r\n        <input className={`popup__input popup__input-name ${nameError !=='' && 'popup__input_type_error'}`} id=\"name-input\" type=\"text\" name=\"name\" required minLength=\"2\" maxLength=\"40\" placeholder={currentUser.name} value={name} onChange={handleName}/>\r\n          <span className={`popup__input-error\" id=\"name-input-error ${nameError !=='' && 'popup__error_visible'}`}>{nameError}</span>\r\n        <input className={`popup__input popup__input-description ${descriptionError !=='' && 'popup__input_type_error'}`} id=\"description-input\" type=\"text\" name=\"description\" required minLength=\"2\" maxLength=\"200\" placeholder={currentUser.about} value={description} onChange={handleDescription}/>\r\n          <span className={`popup__input-error\" id=\"description-input-error ${descriptionError !=='' && 'popup__error_visible'}`}>{descriptionError}</span>\r\n        <button className={`popup__submit popup__edit-profile-submit ${formInvalid && 'popup__submit_disabled'}`} disabled={formInvalid} type=\"submit\">{`${loading ? 'Loading...':'Save'}`}</button>\r\n      </form>\r\n    </div>\r\n  </section>  \r\n  )\r\n}\r\n\r\nexport default EditProfilePopUp;"]},"metadata":{},"sourceType":"module"}